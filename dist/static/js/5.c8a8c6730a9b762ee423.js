webpackJsonp([5],{gvu3:function(t,n,e){e("nGzP")},nGzP:function(t,n){!function(){!function(t){"use strict";function n(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),o=0,n=0;n<e;n++)for(var a=arguments[n],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r}function e(){}var r=function(t){var n=t,e=function(){return n};return{get:e,set:function(t){n=t},clone:function(){return r(e())}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(){},i=function(t){return function(){return t}},u=i(!1),f=i(!0),c=function(){return s},s=function(){var t=function(t){return t.isNone()},n=function(t){return t()},e=function(t){return t},r={fold:function(t,n){return t()},is:u,isSome:u,isNone:f,getOr:e,getOrThunk:n,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:e,orThunk:n,map:c,each:a,bind:c,exists:u,forall:f,filter:c,equals:t,equals_:t,toArray:function(){return[]},toString:i("none()")};return Object.freeze&&Object.freeze(r),r}(),l=function(t){var n=i(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:f,isNone:u,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return l(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:s},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(u,function(n){return e(t,n)})}};return o},d=function(t){return null===t||void 0===t?s:l(t)},g={some:l,none:c,from:d},h=function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n},m=function(t){return function(n){return h(n)===t}}("function"),p=Array.prototype.slice,v=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var a=t[r];n(a,r)&&e.push(a)}return e},y=function(t,n){var e=p.call(t,0);return e.sort(n),e},O=(m(Array.from)&&Array.from,Object.hasOwnProperty),P=function(t,n){return k(t,n)?g.from(t[n]):g.none()},k=function(t,n){return O.call(t,n)},x=function(t){return k(t,"start")&&k(t,"end")},C=function(t){return!k(t,"end")&&!k(t,"replacement")},b=function(t){return k(t,"replacement")},T=function(t){return y(t,function(t,n){return t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1})},D=function(t){return{inlinePatterns:T(v(t,x)),blockPatterns:T(v(t,C)),replacementPatterns:v(t,b)}},S=function(t){return{setPatterns:function(n){t.set(D(n))},getPatterns:function(){return n(t.get().inlinePatterns,t.get().blockPatterns,t.get().replacementPatterns)}}},A={get:S},I=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],N=function(t){var n=P(t,"textpattern_patterns").getOr(I);return D(n)},w=tinymce.util.Tools.resolve("tinymce.util.Delay"),R=tinymce.util.Tools.resolve("tinymce.util.VK"),E=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),K=tinymce.util.Tools.resolve("tinymce.util.Tools"),j=function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(0===n.indexOf(r.start)&&(!r.end||n.lastIndexOf(r.end)===n.length-r.end.length))return r}},q=function(t,n,e,r){return n.substr(e-t.end.length-r,t.end.length)===t.end},z=function(t,n,e){return t-n-e.end.length-e.start.length>0},L=function(t,n,e,r){var o,a;for(a=0;a<t.length;a++)if(o=t[a],void 0!==o.end&&q(o,n,e,r)&&z(e,r,o))return o},M=function(n,e,r){if(!1!==e.collapsed){var o=e.startContainer,a=o.data,i=!0===r?1:0;if(3===o.nodeType){var u=L(n,a,e.startOffset,i);if(void 0!==u){var f=a.lastIndexOf(u.end,e.startOffset-i),c=a.lastIndexOf(u.start,f-u.end.length);if(f=a.indexOf(u.end,c+u.start.length),-1!==c){var s=t.document.createRange();s.setStart(o,c),s.setEnd(o,f+u.end.length);var l=j(n,s.toString());if(!(void 0===u||l!==u||o.data.length<=u.start.length+u.end.length))return{pattern:u,startOffset:c,endOffset:f}}}}}},U=function(t,n,e){for(var r=0;r<t.length;r++){var o=e.lastIndexOf(t[r].start,n);if(-1!==o)return g.some({pattern:t[r],startOffset:o})}return g.none()},_=function(t){return t&&3===t.nodeType},G=function(t,n,e){var r=t.dom.createRng();r.setStart(n,e),r.setEnd(n,e),t.selection.setRng(r)},J=function(t,n,e,r){return t=r>0?t.splitText(r):t,t.splitText(e-r+n.end.length),t.deleteData(0,n.start.length),t.deleteData(t.data.length-n.end.length,n.end.length),t},V=function(t,n,e,r){var o=K.isArray(e.pattern.format)?e.pattern.format:[e.pattern.format];if(0!==K.grep(o,function(n){var e=t.formatter.get(n);return e&&e[0].inline}).length)return t.undoManager.transact(function(){n=J(n,e.pattern,e.endOffset,e.startOffset),r&&t.selection.setCursorLocation(n.nextSibling,1),o.forEach(function(e){t.formatter.apply(e,{},n)})}),n},W=function(t,n,e){var r=t.selection.getRng();return g.from(M(n,r,e)).map(function(n){return V(t,r.startContainer,n,e)})},B=function(t,n){W(t,n,!0).each(function(n){var e=n.data.slice(-1);if(/[\u00a0 ]/.test(e)){n.deleteData(n.data.length-1,1);var r=t.dom.doc.createTextNode(e);t.dom.insertAfter(r,n.parentNode),G(t,r,1)}})},F=function(t,n){W(t,n,!1).each(function(n){G(t,n,n.data.length)})},H=function(t,n){var e,r,o,a,i,u,f,c,s,l,d;if(e=t.selection,r=t.dom,e.isCollapsed()&&(f=r.getParent(e.getStart(),"p"))){for(s=new E(f,f);i=s.next();)if(_(i)){a=i;break}if(a){if(!(c=j(n,a.data)))return;if(l=e.getRng(!0),o=l.startContainer,d=l.startOffset,a===o&&(d=Math.max(0,d-c.start.length)),K.trim(a.data).length===c.start.length)return;c.format&&(u=t.formatter.get(c.format))&&u[0].block&&(a.deleteData(0,c.start.length),t.formatter.apply(c.format,{},a),l.setStart(o,d),l.collapse(!0),e.setRng(l)),c.cmd&&t.undoManager.transact(function(){a.deleteData(0,c.start.length),t.execCommand(c.cmd)})}}},Q=function(t,n){var e=t.selection.getRng(),r=e.startContainer;if(_(r)){var o=e.startOffset;r.insertData(o,n),G(t,r,o+n.length)}else{var a=t.dom.doc.createTextNode(n);e.insertNode(a),G(t,a,a.length)}},X=function(t,n,e){n.deleteData(e.startOffset,e.pattern.start.length),t.insertContent(e.pattern.replacement),g.from(n.nextSibling).filter(_).each(function(e){e.insertData(0,n.data),t.dom.remove(n)})},Y=function(t,n){var e=n.startOffset+n.pattern.start.length,r=t.data.slice(e,e+1);return t.deleteData(e,1),r},Z=function(t,n,e){var r=t.selection.getRng(),o=r.startContainer;r.collapsed&&_(o)&&U(n,r.startOffset,o.data).each(function(n){var r=e?g.some(Y(o,n)):g.none();X(t,o,n),r.each(function(n){return Q(t,n)})})},$=function(t,n){Z(t,n,!0)},tt=function(t,n){Z(t,n,!1)},nt=function(t,n){tt(t,n.replacementPatterns),F(t,n.inlinePatterns),H(t,n.blockPatterns)},et=function(t,n){$(t,n.replacementPatterns),B(t,n.inlinePatterns)},rt=function(t,n,e){for(var r=0;r<t.length;r++)if(e(t[r],n))return!0},ot=function(t,n){return rt(t,n,function(t,n){return t===n.keyCode&&!1===R.modifierPressed(n)})},at=function(t,n){return rt(t,n,function(t,n){return t.charCodeAt(0)===n.charCode})},it={handleEnter:nt,handleInlineKey:et,checkCharCode:at,checkKeyCode:ot},ut=function(t,n){var e=[",",".",";",":","!","?"],r=[32];t.on("keydown",function(e){13!==e.keyCode||R.modifierPressed(e)||it.handleEnter(t,n.get())},!0),t.on("keyup",function(e){it.checkKeyCode(r,e)&&it.handleInlineKey(t,n.get())}),t.on("keypress",function(r){it.checkCharCode(e,r)&&w.setEditorTimeout(t,function(){it.handleInlineKey(t,n.get())})})},ft={setup:ut};o.add("textpattern",function(t){var n=r(N(t.settings));return ft.setup(t,n),A.get(n)})}(window)}()}});
//# sourceMappingURL=5.c8a8c6730a9b762ee423.js.map
webpackJsonp([21],{NBEC:function(t,e,n){n("m/OW")},"m/OW":function(t,e){!function(){!function(t){"use strict";function e(){}var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.util.VK"),i=function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},r=function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},l=function(t){return t.link_list},a=function(t){return"string"==typeof t.default_link_target},s=function(t){return t.default_link_target},u=function(t){return t.target_list},c=function(t,e){t.settings.target_list=e},f=function(t){return!1!==u(t)},g=function(t){return t.rel_list},d=function(t){return void 0!==g(t)},h=function(t){return t.link_class_list},m=function(t){return void 0!==h(t)},v=function(t){return!1!==t.link_title},k=function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target},p={assumeExternalTargets:i,hasContextToolbar:r,getLinkList:l,hasDefaultLinkTarget:a,getDefaultLinkTarget:s,getTargetList:u,setTargetList:c,shouldShowTargetList:f,getRelList:g,hasRelList:d,getLinkClassList:h,hasLinkClassList:m,shouldShowLinkTitle:v,allowUnsafeLinkTarget:k},x=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),L=tinymce.util.Tools.resolve("tinymce.Env"),y=function(e,n){t.document.body.appendChild(e),e.dispatchEvent(n),t.document.body.removeChild(e)},b=function(e){if(!L.ie||L.ie>10){var n=t.document.createElement("a");n.target="_blank",n.href=e,n.rel="noreferrer noopener";var o=t.document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,t.window,0,0,0,0,0,!1,!1,!1,!1,0,null),y(n,o)}else{var i=t.window.open("","_blank");if(i){i.opener=null;var r=i.document;r.open(),r.write('<meta http-equiv="refresh" content="0; url='+x.DOM.encode(e)+'">'),r.close()}}},T={open:b},w=tinymce.util.Tools.resolve("tinymce.util.Tools"),C=function(t,e){var n=["noopener"],o=t?t.split(/\s+/):[],i=function(t){return t.filter(function(t){return-1===w.inArray(n,t)})};return o=e?function(t){return t=i(t),t.length?t.concat(n):n}(o):i(o),o.length?function(t){return w.trim(t.sort().join(" "))}(o):null},_=function(t){return t.replace(/\uFEFF/g,"")},S=function(t,e){return e=e||t.selection.getNode(),D(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},R=function(t,e){var n=e?e.innerText||e.textContent:t.getContent({format:"text"});return _(n)},A=function(t){return t&&"A"===t.nodeName&&t.href},O=function(t){return w.grep(t,A).length>0},M=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},D=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},E=function(t,e){return function(n){t.undoManager.transact(function(){var o=t.selection.getNode(),i=S(t,o),r={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};p.hasRelList(t.settings)||!1!==p.allowUnsafeLinkTarget(t.settings)||(r.rel=C(r.rel,"_blank"===r.target)),n.href===e.href&&(e.attach(),e={}),i?(t.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),t.dom.setAttribs(i,r),t.selection.select(i),t.undoManager.add()):D(o)?I(t,o,r):n.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",r,t.dom.encode(n.text))):t.execCommand("mceInsertLink",!1,r)})}},N=function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();D(e)?U(t,e):t.execCommand("unlink")})}},U=function(t,e){var n,o;(o=t.dom.select("img",e)[0])&&(n=t.dom.getParents(o,"a[href]",e)[0])&&(n.parentNode.insertBefore(o,n),t.dom.remove(n))},I=function(t,e,n){var o,i;(i=t.dom.select("img",e)[0])&&(o=t.dom.create("a",n),i.parentNode.insertBefore(o,i),o.appendChild(i))},P={link:E,unlink:N,isLink:A,hasLinks:O,isOnlyTextSelected:M,getAnchorElement:S,getAnchorText:R,toggleTargetRules:C},B=tinymce.util.Tools.resolve("tinymce.util.Delay"),K=tinymce.util.Tools.resolve("tinymce.util.XHR"),V={},F=function(t,e){var n=p.getLinkList(t.settings);"string"==typeof n?K.send({url:n,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof n?n(function(n){e(t,n)}):e(t,n)},H=function(t,e,n){var o=function(t,n){return n=n||[],w.each(t,function(t){var i={text:t.text||t.title};t.menu?i.menu=o(t.menu):(i.value=t.value,e&&e(i)),n.push(i)}),n};return o(t,n||[])},q=function(t,e,n){var o=t.selection.getRng();B.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(o),n(e)})})},G=function(t,e){var n,o,i,r,l,a,s,u,c,f,g,d={},h=t.selection,m=t.dom,v=function(t){var e=i.find("#text");(!e.value()||t.lastControl&&e.value()===t.lastControl.text())&&e.value(t.control.text()),i.find("#href").value(t.control.value())},k=function(){o||!r||d.text||this.parent().parent().find("#text")[0].value(this.value())},x=function(e){var n=e.meta||{};a&&a.value(t.convertURL(this.value(),"href")),w.each(e.meta,function(t,e){var n=i.find("#"+e);"text"===e?0===o.length&&(n.value(t),d.text=t):n.value(t)}),n.attach&&(V={href:this.value(),attach:n.attach}),n.text||k.call(this)},L=function(t){t.meta=i.toJSON()};r=P.isOnlyTextSelected(h.getContent()),n=P.getAnchorElement(t),d.text=o=P.getAnchorText(t.selection,n),d.href=n?m.getAttrib(n,"href"):"",n?d.target=m.getAttrib(n,"target"):p.hasDefaultLinkTarget(t.settings)&&(d.target=p.getDefaultLinkTarget(t.settings)),(g=m.getAttrib(n,"rel"))&&(d.rel=g),(g=m.getAttrib(n,"class"))&&(d.class=g),(g=m.getAttrib(n,"title"))&&(d.title=g),r&&(l={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){d.text=this.value()}}),e&&(a={type:"listbox",label:"Link list",values:H(e,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:v,value:t.convertURL(d.href,"href"),onPostRender:function(){a=this}}),p.shouldShowTargetList(t.settings)&&(void 0===p.getTargetList(t.settings)&&p.setTargetList(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),u={name:"target",type:"listbox",label:"Target",values:H(p.getTargetList(t.settings))}),p.hasRelList(t.settings)&&(s={name:"rel",type:"listbox",label:"Rel",values:H(p.getRelList(t.settings),function(e){!1===p.allowUnsafeLinkTarget(t.settings)&&(e.value=P.toggleTargetRules(e.value,"_blank"===d.target))})}),p.hasLinkClassList(t.settings)&&(c={name:"class",type:"listbox",label:"Class",values:H(p.getLinkClassList(t.settings),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),p.shouldShowLinkTitle(t.settings)&&(f={name:"title",type:"textbox",label:"Title",value:d.title}),i=t.windowManager.open({title:"Insert link",data:d,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:x,onkeyup:k,onpaste:k,onbeforecall:L},l,f,function(e){var n=[];if(w.each(t.dom.select("a:not([href])"),function(t){var o=t.name||t.id;o&&n.push({text:o,value:"#"+o,selected:-1!==e.indexOf("#"+o)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:v}}(d.href),a,s,u,c],onSubmit:function(e){var n=p.assumeExternalTargets(t.settings),i=P.link(t,V),l=P.unlink(t),a=w.extend({},d,e.data),s=a.href;return s?(r&&a.text!==o||delete a.text,s.indexOf("@")>0&&-1===s.indexOf("//")&&-1===s.indexOf("mailto:")?void q(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(a.href="mailto:"+s),i(a)}):!0===n&&!/^\w+:/i.test(s)||!1===n&&/^\s*www[\.|\d\.]/i.test(s)?void q(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(a.href="http://"+s),i(a)}):void i(a)):void l()}})},J=function(t){F(t,G)},z={open:J},W=function(t,e){return t.dom.getParent(e,"a[href]")},$=function(t){return W(t,t.selection.getStart())},j=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")},X=function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()},Q=function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey},Y=function(t,e){if(e){var n=j(e);if(/^#/.test(n)){var o=t.$(n);o.length&&t.selection.scrollIntoView(o[0],!0)}else T.open(e.href)}},Z=function(t){return function(){z.open(t)}},tt=function(t){return function(){Y(t,$(t))}},et=function(t){return function(e){var n,o,i;return!!(p.hasContextToolbar(t.settings)&&!X(t)&&P.isLink(e)&&(n=t.selection,o=n.getRng(),i=o.startContainer,3===i.nodeType&&n.isCollapsed()&&o.startOffset>0&&o.startOffset<i.data.length))}},nt=function(t){t.on("click",function(e){var n=W(t,e.target);n&&o.metaKeyPressed(e)&&(e.preventDefault(),Y(t,n))}),t.on("keydown",function(e){var n=$(t);n&&13===e.keyCode&&Q(e)&&(e.preventDefault(),Y(t,n))})},ot=function(t){return function(){var e=this;t.on("nodechange",function(n){e.active(!t.readonly&&!!P.getAnchorElement(t,n.element))})}},it=function(t){return function(){var e=this,n=function(t){P.hasLinks(t.parents)?e.show():e.hide()};P.hasLinks(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",function(){t.off("nodechange",n)})}},rt={openDialog:Z,gotoSelectedLink:tt,leftClickedOnAHref:et,setupGotoLinks:nt,toggleActiveState:ot,toggleViewLinkState:it},lt=function(t){t.addCommand("mceLink",rt.openDialog(t))},at={register:lt},st=function(t){t.addShortcut("Meta+K","",rt.openDialog(t))},ut={setup:st},ct=function(t){t.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:rt.openDialog(t),onpostrender:rt.toggleActiveState(t)}),t.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:P.unlink(t),onpostrender:rt.toggleActiveState(t)}),t.addContextToolbar&&t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:rt.gotoSelectedLink(t)})},ft=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:rt.gotoSelectedLink(t),onPostRender:rt.toggleViewLinkState(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:rt.openDialog(t),stateSelector:"a[href]",context:"insert",prependToContext:!0}),t.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:P.unlink(t),stateSelector:"a[href]"})},gt=function(t){t.addContextToolbar&&t.addContextToolbar(rt.leftClickedOnAHref(t),"openlink | link unlink")},dt={setupButtons:ct,setupMenuItems:ft,setupContextToolbars:gt};n.add("link",function(t){dt.setupButtons(t),dt.setupMenuItems(t),dt.setupContextToolbars(t),rt.setupGotoLinks(t),at.register(t),ut.setup(t)})}(window)}()}});
//# sourceMappingURL=21.7ee9970be0cfd087f7f3.js.map
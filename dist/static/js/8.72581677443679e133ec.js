webpackJsonp([8],{BzBW:function(t,e){!function(){!function(t){"use strict";function e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}function n(t,e,n,r,o){return t(n,r)?E.some(n):W(o)&&o(n)?E.none():e(n,r,o)}function r(){var t=function(t){return Xt.fromDom(t.dom().cloneNode(!1))},e=function(t){return t.dom().ownerDocument},n=function(t){return!!Ot(t)&&("body"===St(t)||H(go,St(t)))},r=function(t){return!!Ot(t)&&H(["br","img","hr","input"],St(t))},o=function(t,e){return t.dom().compareDocumentPosition(e.dom())},i=function(t,e){var n=Mt(t);Bt(e,n)};return{up:w({selector:jn,closest:Un,predicate:Mn,all:en}),down:w({selector:Wn,predicate:Bn}),styles:w({get:ne,getRaw:oe,set:te,remove:ie}),attrs:w({get:Pt,set:Nt,remove:Wt,copyTo:i}),insert:w({before:an,after:ln,afterAll:gn,append:sn,appendAll:hn,prepend:fn,wrap:dn}),remove:w({unwrap:bn,remove:vn}),create:w({nu:Xt.fromTag,clone:t,text:Xt.fromText}),query:w({comparePosition:o,prevSibling:nn,nextSibling:rn}),property:w({children:on,name:St,parent:tn,document:e,isText:Et,isComment:At,isElement:Ot,getText:Tr,setText:Ar,isBoundary:n,isEmptyTag:r}),eq:Ve,is:$e}}function o(t,e){var n=function(e,n){if(!M(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom();Ht(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var o=ne(n,t);return parseFloat(o)||0}return r},o=r,i=function(t,e){return X(e,function(e,n){var r=ne(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)};return{set:n,get:r,getOuter:o,aggregate:i,max:function(t,e,n){var r=i(t,n);return e>r?e-r:0}}}function i(t){var e=function(e){return t(e).isRtl()?Bu.rtl:Bu.ltr},n=function(t,n){return e(n).delta(t,n)},r=function(t,n){return e(n).positions(t,n)};return{delta:n,edge:function(t){return e(t).edge(t)},positions:r}}function u(e){return e.control.rootControl.find("#style")[0].getEl().isEqualNode(t.document.activeElement)}function c(t,e,n,r){function o(t,n,r){(1===e.length||r)&&u.setAttrib(t,n,r)}function i(t,n,r){(1===e.length||r)&&u.setStyle(t,n,r)}var u=t.dom;Kf(t)&&Es.syncAdvancedStyleFields(t,r);var c=r.control.rootControl.toJSON();t.undoManager.transact(function(){ps.each(e,function(e){o(e,"scope",c.scope),o(e,"style",c.style),o(e,"class",c.class),i(e,"height",Wf(c.height)),c.type!==e.parentNode.nodeName.toLowerCase()&&Ms(t.dom,e,c.type),c.align!==n.align&&(Cs.unApplyAlign(t,e),Cs.applyAlign(t,e,c.align))}),t.focus()})}function a(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var o=0;o<e.children.length;o++)a(t,e.children[o],n,r)}function l(){var t=E.none(),e=function(){t=E.none()},n=function(e,n){var r=t.map(function(t){return e.compare(t,n)});return t=E.some(n),r},r=function(t,e){e.extract(t).each(function(t){n(e,t).each(function(t){o.trigger.move(t)})})},o=hd.create({move:md(["info"])});return{onEvent:r,reset:e,events:o.registry}}function f(){return{onEvent:v,reset:v}}function s(){var t=f(),e=l(),n=t,r=function(){n.reset(),n=e},o=function(){n.reset(),n=t},i=function(t,e){n.onEvent(t,e)};return{on:r,off:o,isOn:function(){return n===e},onEvent:i,events:e.events}}function d(t,e,n,r){var o=E.none(),i=function(){o=E.none()};return{mousedown:function(t){r.clear(e),o=Tp(t.target(),n)},mouseover:function(i){o.each(function(o){r.clear(e),Tp(i.target(),n).each(function(i){ti.identify(o,i,n).each(function(n){var u=n.boxes().getOr([]);(u.length>1||1===u.length&&!Ve(o,i))&&(r.selectRange(e,u,n.start(),n.finish()),t.selectContents(i))})})})},mouseup:function(t){o.each(i)}}}function m(t,e){var n=mt(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=E.none(),o=Xp.byAttr(ii);t.on("init",function(i){var u=t.getWin(),c=kf(t),a=Pf(t),l=function(){var e=t.selection,n=Xt.fromDom(e.getStart()),r=Xt.fromDom(e.getEnd());qo.sharedOne(ur.table,[n,r]).fold(function(){o.clear(c)},v)},f=zp.mouse(u,c,a,o),s=zp.keyboard(u,c,a,o),d=function(t){return!0===t.raw().shiftKey},m=function(e,n){d(e)&&(n.kill()&&e.kill(),n.selection().each(function(e){var n=Tm.relative(e.start(),e.finish()),r=Fm(u,n);t.selection.setRng(r)}))},g=function(e){var n=y(e);if(n.raw().shiftKey&&Pp.isNavigation(n.raw().which)){var r=t.selection.getRng(),o=Xt.fromDom(r.startContainer),i=Xt.fromDom(r.endContainer);s.keyup(n,o,r.startOffset,i,r.endOffset).each(function(t){m(n,t)})}},h=function(n){var r=y(n);e().each(function(t){t.hideBars()});var o=t.selection.getRng(),i=Xt.fromDom(t.selection.getStart()),u=Xt.fromDom(o.startContainer),c=Xt.fromDom(o.endContainer),a=Hf.directionAt(i).isRtl()?Pp.rtl:Pp.ltr;s.keydown(r,u,o.startOffset,c,o.endOffset,a).each(function(t){m(r,t)}),e().each(function(t){t.showBars()})},p=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},y=function(t){var e=Xt.fromDom(t.target),n=function(){t.stopPropagation()},r=function(){t.preventDefault()},o=b(r,n);return{target:w(e),x:w(p(t)?t.x:null),y:w(p(t)?t.y:null),stop:n,prevent:r,kill:o,raw:w(t)}},x=function(t){return 0===t.button},C=function(t){return void 0===t.buttons||(!!(Fs.ie&&Fs.ie>=12&&0===t.buttons)||0!=(1&t.buttons))},R=function(t){x(t)&&Jp(t)&&f.mousedown(y(t))},S=function(t){C(t)&&Jp(t)&&f.mouseover(y(t))},T=function(t){x(t)&&Jp(t)&&f.mouseup(y(t))};t.on("mousedown",R),t.on("mouseover",S),t.on("mouseup",T),t.on("keyup",g),t.on("keydown",h),t.on("nodechange",l),r=E.some(n({mousedown:R,mouseover:S,mouseup:T,keyup:g,keydown:h}))});var i=function(){r.each(function(t){})};return{clear:o.clear,destroy:i}}function g(t){var e=tm(t),n=m(t,e.lazyResize),r=ms(t,e.lazyWire),o=Kp(t),i=wl(E.none());return ad.registerCommands(t,r,n,o,i),Ti.registerEvents(t,o,r,n),nv.addMenuItems(t,o),tv.addButtons(t),tv.addToolbars(t),t.on("PreInit",function(){t.serializer.addTempAttr(ii.firstSelected()),t.serializer.addTempAttr(ii.lastSelected())}),Xf(t)&&t.on("keydown",function(n){Pg.handle(n,t,r,e.lazyWire)}),t.on("remove",function(){e.destroy(),n.destroy()}),iv(t,i)}function h(){}var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=function(){},b=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},w=function(t){return function(){return t}},y=function(t){return t},x=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},C=function(t){return function(){throw new Error(t)}},R=w(!1),S=w(!0),T=function(){return D},D=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:R,isSome:R,isNone:S,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:w(null),getOrUndefined:w(void 0),or:n,orThunk:e,map:T,each:v,bind:T,exists:R,forall:S,filter:T,equals:t,equals_:t,toArray:function(){return[]},toString:w("none()")};return Object.freeze&&Object.freeze(r),r}(),A=function(t){var e=w(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:S,isNone:R,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return A(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:D},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(R,function(e){return n(t,e)})}};return o},O=function(t){return null===t||void 0===t?D:A(t)},E={some:A,none:T,from:O},k=function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},N=function(t){return function(e){return k(e)===t}},B=N("string"),P=N("array"),I=N("boolean"),W=N("function"),M=N("number"),_=Array.prototype.slice,L=Array.prototype.indexOf,F=Array.prototype.push,j=function(t,e){return L.call(t,e)},H=function(t,e){return j(t,e)>-1},z=function(t,e){for(var n=0,r=t.length;n<r;n++){if(e(t[n],n))return!0}return!1},U=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},q=function(t,e){for(var n=0,r=t.length;n<r;n++){e(t[n],n)}},G=function(t,e){for(var n=t.length-1;n>=0;n--){e(t[n],n)}},V=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},Y=function(t,e,n){return G(t,function(t){n=e(n,t)}),n},X=function(t,e,n){return q(t,function(t){n=e(n,t)}),n},J=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return E.some(o)}return E.none()},K=function(t,e){for(var n=0,r=t.length;n<r;n++){if(e(t[n],n))return E.some(n)}return E.none()},$=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!P(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);F.apply(e,t[n])}return e},Q=function(t,e){var n=U(t,e);return $(n)},Z=function(t,e){for(var n=0,r=t.length;n<r;++n){if(!0!==e(t[n],n))return!1}return!0},tt=function(t){var e=_.call(t,0);return e.reverse(),e},et=function(t){return 0===t.length?E.none():E.some(t[t.length-1])},nt=(W(Array.from)&&Array.from,Object.keys),rt=function(t,e){for(var n=nt(t),r=0,o=n.length;r<o;r++){var i=n[r];e(t[i],i)}},ot=function(t,e){return it(t,function(t,n){return{k:n,v:e(t,n)}})},it=function(t,e){var n={};return rt(t,function(t,r){var o=e(t,r);n[o.k]=o.v}),n},ut=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return q(t,function(t,n){r[t]=w(e[n])}),r}},ct=function(t){return t.slice(0).sort()},at=function(t,e){throw new Error("All required keys ("+ct(t).join(", ")+") were not specified. Specified keys were: "+ct(e).join(", ")+".")},lt=function(t){throw new Error("Unsupported keys for object: "+ct(t).join(", "))},ft=function(t,e){if(!P(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");q(e,function(e){if(!B(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},st=function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+ct(t).join(", ")+") were not.")},dt=function(t){var e=ct(t);J(e,function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},mt=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return ft("required",t),ft("optional",e),dt(n),function(r){var o=nt(r);Z(t,function(t){return H(o,t)})||at(t,o);var i=V(o,function(t){return!H(n,t)});i.length>0&&lt(i);var u={};return q(t,function(t){u[t]=w(r[t])}),q(e,function(t){u[t]=w(Object.prototype.hasOwnProperty.call(r,t)?E.some(r[t]):E.none())}),u}},gt=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE),ht=t.Node.DOCUMENT_NODE,pt=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),vt=t.Node.TEXT_NODE,bt=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")()),wt=function(t,e){for(var n=void 0!==e&&null!==e?e:bt,r=0;r<t.length&&void 0!==n&&null!==n;++r)n=n[t[r]];return n},yt=function(t,e){var n=t.split(".");return wt(n,e)},xt=function(t,e){return yt(t,e)},Ct=function(t,e){var n=xt(t,e);if(void 0===n||null===n)throw new Error(t+" not available on this browser");return n},Rt={getOrDie:Ct},St=function(t){return t.dom().nodeName.toLowerCase()},Tt=function(t){return t.dom().nodeType},Dt=function(t){return function(e){return Tt(e)===t}},At=function(t){return Tt(t)===gt||"#comment"===St(t)},Ot=Dt(pt),Et=Dt(vt),kt=function(e,n,r){if(!(B(r)||I(r)||M(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")},Nt=function(t,e,n){kt(t.dom(),e,n)},Bt=function(t,e){var n=t.dom();rt(e,function(t,e){kt(n,e,t)})},Pt=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},It=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Wt=function(t,e){t.dom().removeAttribute(e)},Mt=function(t){return X(t.dom().attributes,function(t,e){return t[e.name]=e.value,t},{})},_t=function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e},Lt=function(t,e){return-1!==t.indexOf(e)},Ft=function(t,e){return _t(t,e,t.length-e.length)},jt=function(t){return t.replace(/^\s+|\s+$/g,"")},Ht=function(t){return void 0!==t.style&&W(t.style.getPropertyValue)},zt=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},Ut=function(e,n){var r=n||t.document,o=r.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Vt(o.childNodes[0])},qt=function(e,n){var r=n||t.document,o=r.createElement(e);return Vt(o)},Gt=function(e,n){var r=n||t.document,o=r.createTextNode(e);return Vt(o)},Vt=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:w(t)}},Yt=function(t,e,n){var r=t.dom();return E.from(r.elementFromPoint(e,n)).map(Vt)},Xt={fromHtml:Ut,fromTag:qt,fromText:Gt,fromDom:Vt,fromPoint:Yt},Jt=function(t){var e=Et(t)?t.dom().parentNode:t.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)},Kt=zt(function(){return $t(Xt.fromDom(t.document))}),$t=function(t){var e=t.dom().body;if(null===e||void 0===e)throw new Error("Body is not available yet");return Xt.fromDom(e)},Qt=function(e,n,r){if(!B(r))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);Ht(e)&&e.style.setProperty(n,r)},Zt=function(t,e){Ht(t)&&t.style.removeProperty(e)},te=function(t,e,n){var r=t.dom();Qt(r,e,n)},ee=function(t,e){var n=t.dom();rt(e,function(t,e){Qt(n,e,t)})},ne=function(e,n){var r=e.dom(),o=t.window.getComputedStyle(r),i=o.getPropertyValue(n),u=""!==i||Jt(e)?i:re(r,n);return null===u?void 0:u},re=function(t,e){return Ht(t)?t.style.getPropertyValue(e):""},oe=function(t,e){var n=t.dom(),r=re(n,e);return E.from(r).filter(function(t){return t.length>0})},ie=function(t,e){var n=t.dom();Zt(n,e),It(t,"style")&&""===jt(Pt(t,"style"))&&Wt(t,"style")},ue=function(t,e){var n=t.dom(),r=e.dom();Ht(n)&&Ht(r)&&(r.style.cssText=n.style.cssText)},ce=function(){return Rt.getOrDie("Node")},ae=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},le=function(t,e){return ae(t,e,ce().DOCUMENT_POSITION_PRECEDING)},fe=function(t,e){return ae(t,e,ce().DOCUMENT_POSITION_CONTAINED_BY)},se={documentPositionPreceding:le,documentPositionContainedBy:fe},de=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},me=function(t,e){var n=de(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return pe(r(1),r(2))},ge=function(t,e){var n=String(e).toLowerCase();return 0===t.length?he():me(t,n)},he=function(){return pe(0,0)},pe=function(t,e){return{major:t,minor:e}},ve={nu:pe,detect:ge,unknown:he},be=function(t,e){return function(){return e===t}},we=function(){return ye({current:void 0,version:ve.unknown()})},ye=function(t){var e=t.current;return{current:e,version:t.version,isEdge:be("Edge",e),isChrome:be("Chrome",e),isIE:be("IE",e),isOpera:be("Opera",e),isFirefox:be("Firefox",e),isSafari:be("Safari",e)}},xe={unknown:we,nu:ye,edge:w("Edge"),chrome:w("Chrome"),ie:w("IE"),opera:w("Opera"),firefox:w("Firefox"),safari:w("Safari")},Ce=function(t,e){return function(){return e===t}},Re=function(){return Se({current:void 0,version:ve.unknown()})},Se=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Ce("Windows",e),isiOS:Ce("iOS",e),isAndroid:Ce("Android",e),isOSX:Ce("OSX",e),isLinux:Ce("Linux",e),isSolaris:Ce("Solaris",e),isFreeBSD:Ce("FreeBSD",e)}},Te={unknown:Re,nu:Se,windows:w("Windows"),ios:w("iOS"),android:w("Android"),linux:w("Linux"),osx:w("OSX"),solaris:w("Solaris"),freebsd:w("FreeBSD")},De=function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,i=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,c=r||i||u&&!0===/mobile/i.test(n),a=t.isiOS()||t.isAndroid(),l=a&&!c,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:w(r),isiPhone:w(o),isTablet:w(c),isPhone:w(l),isTouch:w(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:w(f)}},Ae=function(t,e){var n=String(e).toLowerCase();return J(t,function(t){return t.search(n)})},Oe=function(t,e){return Ae(t,e).map(function(t){var n=ve.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Ee=function(t,e){return Ae(t,e).map(function(t){var n=ve.detect(t.versionRegexes,e);return{current:t.name,version:n}})},ke={detectBrowser:Oe,detectOs:Ee},Ne=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Be=function(t){return function(e){return Lt(e,t)}},Pe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Lt(t,"edge/")&&Lt(t,"chrome")&&Lt(t,"safari")&&Lt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ne],search:function(t){return Lt(t,"chrome")&&!Lt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Lt(t,"msie")||Lt(t,"trident")}},{name:"Opera",versionRegexes:[Ne,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Be("firefox")},{name:"Safari",versionRegexes:[Ne,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Lt(t,"safari")||Lt(t,"mobile/"))&&Lt(t,"applewebkit")}}],Ie=[{name:"Windows",search:Be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Lt(t,"iphone")||Lt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Be("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Be("linux"),versionRegexes:[]},{name:"Solaris",search:Be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Be("freebsd"),versionRegexes:[]}],We={browsers:w(Pe),oses:w(Ie)},Me=function(t){var e=We.browsers(),n=We.oses(),r=ke.detectBrowser(e,t).fold(xe.unknown,xe.nu),o=ke.detectOs(n,t).fold(Te.unknown,Te.nu);return{browser:r,os:o,deviceType:De(o,r,t)}},_e={detect:Me},Le=zt(function(){var e=t.navigator.userAgent;return _e.detect(e)}),Fe={detect:Le},je=pt,He=ht,ze=function(t,e){var n=t.dom();if(n.nodeType!==je)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Ue=function(t){return t.nodeType!==je&&t.nodeType!==He||0===t.childElementCount},qe=function(e,n){var r=void 0===n?t.document:n.dom();return Ue(r)?[]:U(r.querySelectorAll(e),Xt.fromDom)},Ge=function(e,n){var r=void 0===n?t.document:n.dom();return Ue(r)?E.none():E.from(r.querySelector(e)).map(Xt.fromDom)},Ve=function(t,e){return t.dom()===e.dom()},Ye=function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},Xe=function(t,e){return se.documentPositionContainedBy(t.dom(),e.dom())},Je=Fe.detect().browser,Ke=Je.isIE()?Xe:Ye,$e=ze,Qe=function(t){return Xt.fromDom(t.dom().ownerDocument)},Ze=function(t){return Xt.fromDom(t.dom().ownerDocument.defaultView)},tn=function(t){return E.from(t.dom().parentNode).map(Xt.fromDom)},en=function(t,e){for(var n=W(e)?e:R,r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=Xt.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},nn=function(t){return E.from(t.dom().previousSibling).map(Xt.fromDom)},rn=function(t){return E.from(t.dom().nextSibling).map(Xt.fromDom)},on=function(t){return U(t.dom().childNodes,Xt.fromDom)},un=function(t,e){var n=t.dom().childNodes;return E.from(n[e]).map(Xt.fromDom)},cn=function(t){return un(t,0)},an=(ut("element","offset"),function(t,e){tn(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})}),ln=function(t,e){rn(t).fold(function(){tn(t).each(function(t){sn(t,e)})},function(t){an(t,e)})},fn=function(t,e){cn(t).fold(function(){sn(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},sn=function(t,e){t.dom().appendChild(e.dom())},dn=function(t,e){an(t,e),sn(e,t)},mn=function(t,e){q(e,function(e){an(t,e)})},gn=function(t,e){q(e,function(n,r){var o=0===r?t:e[r-1];ln(o,n)})},hn=function(t,e){q(e,function(e){sn(t,e)})},pn=function(t){t.dom().textContent="",q(on(t),function(t){vn(t)})},vn=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},bn=function(t){var e=on(t);e.length>0&&mn(t,e),vn(t)},wn=(ut("width","height"),ut("width","height"),ut("rows","columns")),yn=ut("row","column"),xn=(ut("x","y"),ut("element","rowspan","colspan")),Cn=ut("element","rowspan","colspan","isNew"),Rn=ut("element","rowspan","colspan","row","column"),Sn=ut("element","cells","section"),Tn=ut("element","isNew"),Dn=ut("element","cells","section","isNew"),An=ut("cells","section"),On=ut("details","section"),En=ut("startRow","startCol","finishRow","finishCol"),kn=function(t,e,n){return V(en(t,n),e)},Nn=function(t,e){return V(on(t),e)},Bn=function(t,e){var n=[];return q(on(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(Bn(t,e))}),n},Pn=function(t,e,n){return kn(t,function(t){return ze(t,e)},n)},In=function(t,e){return Nn(t,function(t){return ze(t,e)})},Wn=function(t,e){return qe(e,t)},Mn=function(t,e,n){for(var r=t.dom(),o=W(n)?n:w(!1);r.parentNode;){r=r.parentNode;var i=Xt.fromDom(r);if(e(i))return E.some(i);if(o(i))break}return E.none()},_n=function(t,e,r){return n(function(t,e){return e(t)},Mn,t,e,r)},Ln=function(t,e){var n=function(t){return e(Xt.fromDom(t))};return J(t.dom().childNodes,n).map(Xt.fromDom)},Fn=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){var o=Xt.fromDom(t.childNodes[r]);if(e(o))return E.some(o);var i=n(t.childNodes[r]);if(i.isSome())return i}return E.none()};return n(t.dom())},jn=function(t,e,n){return Mn(t,function(t){return ze(t,e)},n)},Hn=function(t,e){return Ln(t,function(t){return ze(t,e)})},zn=function(t,e){return Ge(e,t)},Un=function(t,e,r){return n(ze,jn,t,e,r)},qn=function(t,e){return Gn(t,e,w(!0))},Gn=function(t,e,n){return Q(on(t),function(t){return ze(t,e)?n(t)?[t]:[]:Gn(t,e,n)})},Vn={firstLayer:qn,filterFirstLayer:Gn},Yn=function(t,e,n){if(void 0===n&&(n=R),n(e))return E.none();if(H(t,St(e)))return E.some(e);var r=function(t){return ze(t,"table")||n(t)};return jn(e,t.join(","),r)},Xn=function(t,e){return Yn(["td","th"],t,e)},Jn=function(t){return Vn.firstLayer(t,"th,td")},Kn=function(t,e){return Yn(["caption","tr","tbody","tfoot","thead"],t,e)},$n=function(t,e){return tn(e).map(function(e){return In(e,t)})},Qn=e($n,"th,td"),Zn=e($n,"tr"),tr=function(t){return zn(t,"th,td")},er=function(t,e){return Un(t,"table",e)},nr=function(t,e){return Yn(["tr"],t,e)},rr=function(t){return Vn.firstLayer(t,"tr")},or=function(t,e){return parseInt(Pt(t,e),10)},ir=function(t,e,n){var r=or(t,e),o=or(t,n);return wn(r,o)},ur={cell:Xn,firstCell:tr,cells:Jn,neighbourCells:Qn,table:er,row:nr,rows:rr,notCell:Kn,neighbourRows:Zn,attr:or,grid:ir},cr=function(t){var e=ur.rows(t);return U(e,function(t){var e=t,n=tn(e),r=n.map(function(t){var e=St(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}).getOr("tbody"),o=U(ur.cells(t),function(t){var e=It(t,"rowspan")?parseInt(Pt(t,"rowspan"),10):1,n=It(t,"colspan")?parseInt(Pt(t,"colspan"),10):1;return xn(t,e,n)});return Sn(e,o,r)})},ar=function(t,e){return U(t,function(t){var n=U(ur.cells(t),function(t){var e=It(t,"rowspan")?parseInt(Pt(t,"rowspan"),10):1,n=It(t,"colspan")?parseInt(Pt(t,"colspan"),10):1;return xn(t,e,n)});return Sn(t,n,e.section())})},lr={fromTable:cr,fromPastedRows:ar},fr=function(t,e){return t+","+e},sr=function(t,e,n){var r=t.access()[fr(e,n)];return void 0!==r?E.some(r):E.none()},dr=function(t,e,n){var r=mr(t,function(t){return n(e,t.element())});return r.length>0?E.some(r[0]):E.none()},mr=function(t,e){var n=Q(t.all(),function(t){return t.cells()});return V(n,e)},gr=function(t){var e={},n=[],r=t.length,o=0;q(t,function(t,r){var i=[];q(t.cells(),function(t){for(var n=0;void 0!==e[fr(r,n)];)n++;for(var u=Rn(t.element(),t.rowspan(),t.colspan(),r,n),c=0;c<t.colspan();c++)for(var a=0;a<t.rowspan();a++){var l=r+a,f=n+c,s=fr(l,f);e[s]=u,o=Math.max(o,f+1)}i.push(u)}),n.push(Sn(t.element(),i,t.section()))});var i=wn(r,o);return{grid:w(i),access:w(e),all:w(n)}},hr=function(t){var e=U(t.all(),function(t){return t.cells()});return $(e)},pr={generate:gr,getAt:sr,findItem:dr,filterItems:mr,justCells:hr},vr=ut("minRow","minCol","maxRow","maxCol"),br=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),o=r,i=n,u=0,c=0;return rt(t.access(),function(t){if(e(t)){var n=t.row(),r=n+t.rowspan()-1,a=t.column(),l=a+t.colspan()-1;n<o?o=n:r>u&&(u=r),a<i?i=a:l>c&&(c=l)}}),vr(o,i,u,c)},wr=function(t,e,n){var r=t[n].element(),o=Xt.fromTag("td");sn(o,Xt.fromTag("br")),(e?sn:fn)(r,o)},yr=function(t,e,n,r){for(var o=e.grid().columns(),i=e.grid().rows(),u=0;u<i;u++)for(var c=!1,a=0;a<o;a++)if(!(u<n.minRow()||u>n.maxRow()||a<n.minCol()||a>n.maxCol())){var l=pr.getAt(e,u,a).filter(r).isNone();l?wr(t,c,u):c=!0}},xr=function(t,e){var n=V(Vn.firstLayer(t,"tr"),function(t){return 0===t.dom().childElementCount});q(n,vn),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||q(Vn.firstLayer(t,"th,td"),function(t){Wt(t,"rowspan"),Wt(t,"colspan")}),Wt(t,"width"),Wt(t,"height"),ie(t,"width"),ie(t,"height")},Cr=function(t,e){var n=function(t){return ze(t.element(),e)},r=lr.fromTable(t),o=pr.generate(r),i=br(o,n),u="th:not("+e+"),td:not("+e+")",c=Vn.filterFirstLayer(t,"th,td",function(t){return ze(t,u)});return q(c,vn),yr(r,o,i,n),xr(t,i),t},Rr={extract:Cr},Sr=function(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return r(n).getOr("")},r=function(e){return t(e)?E.from(e.dom().nodeValue):E.none()};return{get:n,getOption:r,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(Et,"text"),Tr=function(t){return Sr.get(t)},Dr=function(t){return Sr.getOption(t)},Ar=function(t,e){Sr.set(t,e)},Or=function(t){return"img"===St(t)?1:Dr(t).fold(function(){return on(t).length},function(t){return t.length})},Er=function(t){return Dr(t).filter(function(t){return 0!==t.trim().length||t.indexOf(" ")>-1}).isSome()},kr=["img","br"],Nr=function(t){return Er(t)||H(kr,St(t))},Br=function(t){return Fn(t,Nr)},Pr=function(t){return Ir(t,Nr)},Ir=function(t,e){var n=function(t){for(var r=on(t),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return E.some(i);var u=n(i);if(u.isSome())return u}return E.none()};return n(t)},Wr=function(t,e){return Xt.fromDom(t.dom().cloneNode(e))},Mr=function(t){return Wr(t,!1)},_r=function(t){return Wr(t,!0)},Lr=function(t,e){var n=Xt.fromTag(e),r=Mt(t);return Bt(n,r),n},Fr=function(t,e){var n=Lr(t,e),r=on(_r(t));return hn(n,r),n},jr=function(){var t=Xt.fromTag("td");return sn(t,Xt.fromTag("br")),t},Hr=function(t,e,n){var r=Fr(t,e);return rt(n,function(t,e){null===t?Wt(r,e):Nt(r,e,t)}),r},zr=function(t){return t},Ur=function(t){return function(){return Xt.fromTag("tr",t.dom())}},qr=function(t,e,n){return Br(t).map(function(r){var o=n.join(","),i=Pn(r,o,function(e){return Ve(e,t)});return Y(i,function(t,e){var n=Mr(e);return Wt(n,"contenteditable"),sn(t,n),n},e)}).getOr(e)},Gr=function(t,e,n){var r=function(e){var r=Qe(e.element()),o=Xt.fromTag(St(e.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=i.length>0?qr(e.element(),o,i):o;return sn(u,Xt.fromTag("br")),ue(e.element(),o),ie(o,"height"),1!==e.colspan()&&ie(e.element(),"width"),t(e.element(),o),o};return{row:Ur(e),cell:r,replace:Hr,gap:jr}},Vr=function(t){return{row:Ur(t),cell:jr,replace:zr,gap:jr}},Yr={cellOperations:Gr,paste:Vr},Xr=function(e,n){var r=n||t.document,o=r.createElement("div");return o.innerHTML=e,on(Xt.fromDom(o))},Jr=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,o=e.row(),i=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},Kr=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},$r=function(t,n){for(var r=!0,o=e(Kr,n),i=n.startRow();i<=n.finishRow();i++)for(var u=n.startCol();u<=n.finishCol();u++)r=r&&pr.getAt(t,i,u).exists(o);return r?E.some(n):E.none()},Qr={inSelection:Jr,isWithin:Kr,isRectangular:$r},Zr=function(t,e){return En(Math.min(t.row(),e.row()),Math.min(t.column(),e.column()),Math.max(t.row()+t.rowspan()-1,e.row()+e.rowspan()-1),Math.max(t.column()+t.colspan()-1,e.column()+e.colspan()-1))},to=function(t,e,n){var r=pr.findItem(t,e,Ve),o=pr.findItem(t,n,Ve);return r.bind(function(t){return o.map(function(e){return Zr(t,e)})})},eo=function(t,e,n){return to(t,e,n).bind(function(e){return Qr.isRectangular(t,e)})},no={getAnyBox:to,getBox:eo},ro=function(t,e,n,r){return pr.findItem(t,e,Ve).bind(function(e){var o=n>0?e.row()+e.rowspan()-1:e.row(),i=r>0?e.column()+e.colspan()-1:e.column();return pr.getAt(t,o+n,i+r).map(function(t){return t.element()})})},oo=function(t,n,r){return no.getAnyBox(t,n,r).map(function(n){var r=pr.filterItems(t,e(Qr.inSelection,n));return U(r,function(t){return t.element()})})},io=function(t,e){var n=function(t,e){return Ke(e,t)};return pr.findItem(t,e,n).map(function(t){return t.element()})},uo={moveBy:ro,intercepts:oo,parentCell:io},co=function(t,e,n){return ur.table(t).bind(function(r){var o=so(r);return uo.moveBy(o,t,e,n)})},ao=function(t,e,n){var r=so(t);return uo.intercepts(r,e,n)},lo=function(t,e,n,r,o){var i=so(t),u=Ve(t,n)?E.some(e):uo.parentCell(i,e),c=Ve(t,o)?E.some(r):uo.parentCell(i,r);return u.bind(function(t){return c.bind(function(e){return uo.intercepts(i,t,e)})})},fo=function(t,e,n){var r=so(t);return no.getBox(r,e,n)},so=function(t){var e=lr.fromTable(t);return pr.generate(e)},mo={moveBy:co,intercepts:ao,nestedIntercepts:lo,getBox:fo},go=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ho=ut("left","right"),po=ut("first","second","splits"),vo=function(t,n,r){var o=t.property().children(n);return K(o,e(t.eq,r)).map(function(t){return{before:w(o.slice(0,t)),after:w(o.slice(t+1))}})},bo=function(t,e,n){return vo(t,e,n).map(function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),ho(e,r)})},wo=function(t,e,n){return vo(t,e,n).map(function(r){var o=t.create().clone(e);return t.insert().appendAll(o,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,o),ho(o,e)})},yo=function(t,e,n,r){var o=function(e,i,u){var c=po(e,E.none(),u);return n(e)?po(e,i,u):t.property().parent(e).bind(function(i){return r(t,i,e).map(function(t){var e=[{first:t.left,second:t.right}],r=n(i)?i:t.left();return o(r,E.some(t.right()),u.concat(e))})}).getOr(c)};return o(e,E.none(),[])},xo=function(t,e,n,r){return r(t,e,n[0],n.slice(1))},Co=function(t,e,n){return n.length>0?xo(t,e,n,Ro):E.none()},Ro=function(t,e,n,r){var o=e(t,n);return Y(r,function(n,r){var o=e(t,r);return So(t,n,o)},o)},So=function(t,n,r){return n.bind(function(n){return r.filter(e(t.eq,n))})},To=function(t,n){return e(t.eq,n)},Do=function(t,e,n,r){var o=t.property().children(e);if(t.eq(e,n[0]))return E.some([n[0]]);if(t.eq(e,r[0]))return E.some([r[0]]);var i=function(n){var r=tt(n),i=K(r,To(t,e)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return K(o,To(t,u))},u=i(n),c=i(r);return u.bind(function(t){return c.map(function(e){var n=Math.min(t,e),r=Math.max(t,e);return o.slice(n,r+1)})})},Ao=function(t,e,n,r){void 0===r&&(r=R);var o=[e].concat(t.up().all(e)),i=[n].concat(t.up().all(n)),u=function(t){return K(t,r).fold(function(){return t},function(e){return t.slice(0,e+1)})},c=u(o),a=u(i),l=J(c,function(e){return z(a,To(t,e))});return{firstpath:w(c),secondpath:w(a),shared:w(l)}},Oo=function(t,e,n){var r=Ao(t,e,n);return r.shared().bind(function(e){return Do(t,e,r.firstpath(),r.secondpath())})},Eo={subset:Oo,ancestors:Ao},ko=Co,No=Eo.subset,Bo=Eo.ancestors,Po=wo,Io=bo,Wo=yo,Mo={sharedOne:ko,subset:No,ancestors:Bo,breakToLeft:Po,breakToRight:Io,breakPath:Wo},_o=r(),Lo=function(t,e){return Mo.sharedOne(_o,function(e,n){return t(n)},e)},Fo=function(t,e){return Mo.subset(_o,t,e)},jo=function(t,e,n){return Mo.ancestors(_o,t,e,n)},Ho=function(t,e){return Mo.breakToLeft(_o,t,e)},zo=function(t,e){return Mo.breakToRight(_o,t,e)},Uo=function(t,e,n){return Mo.breakPath(_o,t,e,function(t,e,r){return n(e,r)})},qo={sharedOne:Lo,subset:Fo,ancestors:jo,breakToLeft:Ho,breakToRight:zo,breakPath:Uo},Go=mt(["boxes","start","finish"],[]),Vo={create:Go},Yo=function(t){return jn(t,"table")},Xo=function(t,e,n){var r=function(t){return function(e){return void 0!==n&&n(e)||Ve(e,t)}};return Ve(t,e)?E.some(Vo.create({boxes:E.some([t]),start:t,finish:e})):Yo(t).bind(function(o){return Yo(e).bind(function(i){if(Ve(o,i))return E.some(Vo.create({boxes:mo.intercepts(o,t,e),start:t,finish:e}));if(Ke(o,i)){var u=Pn(e,"td,th",r(o)),c=u.length>0?u[u.length-1]:e;return E.some(Vo.create({boxes:mo.nestedIntercepts(o,t,o,e,i),start:t,finish:c}))}if(Ke(i,o)){var u=Pn(t,"td,th",r(i)),a=u.length>0?u[u.length-1]:t;return E.some(Vo.create({boxes:mo.nestedIntercepts(i,t,o,e,i),start:t,finish:a}))}return qo.ancestors(t,e).shared().bind(function(u){return Un(u,"table",n).bind(function(n){var u=Pn(e,"td,th",r(n)),c=u.length>0?u[u.length-1]:e,a=Pn(t,"td,th",r(n)),l=a.length>0?a[a.length-1]:t;return E.some(Vo.create({boxes:mo.nestedIntercepts(n,t,o,e,i),start:l,finish:c}))})})})})},Jo=function(t,e){var n=Wn(t,e);return n.length>0?E.some(n):E.none()},Ko=function(t,e){return J(t,function(t){return ze(t,e)})},$o=function(t,e,n){return zn(t,e).bind(function(e){return zn(t,n).bind(function(t){return qo.sharedOne(Yo,[e,t]).map(function(n){return{first:w(e),last:w(t),table:w(n)}})})})},Qo=function(t,e){return jn(t,"table").bind(function(n){return zn(n,e).bind(function(e){return Xo(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:w(e),start:w(t.start()),finish:w(t.finish())}})})})})},Zo=function(t,e,n,r,o){return Ko(t,o).bind(function(t){return mo.moveBy(t,e,n).bind(function(t){return Qo(t,r)})})},ti={identify:Xo,retrieve:Jo,shiftSelection:Zo,getEdges:$o},ei=function(t,e){return ti.retrieve(t,e)},ni=function(t,e,n){return ti.getEdges(t,e,n).bind(function(e){var n=function(e){return Ve(t,e)},r=jn(e.first(),"thead,tfoot,tbody,table",n),o=jn(e.last(),"thead,tfoot,tbody,table",n);return r.bind(function(t){return o.bind(function(n){return Ve(t,n)?mo.getBox(e.table(),e.first(),e.last()):E.none()})})})},ri={retrieve:ei,retrieveBox:ni},oi="data-mce-selected",ii={selected:w(oi),selectedSelector:w("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:w("[data-mce-selected]"),firstSelected:w("data-mce-first-selected"),firstSelectedSelector:w("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:w("data-mce-last-selected"),lastSelectedSelector:w("td[data-mce-last-selected],th[data-mce-last-selected]")},ui=function(e){if(!P(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],r={};return q(e,function(o,i){var u=nt(o);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=o[c];if(void 0!==r[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!P(a))throw new Error("case arguments must be an array");n.push(c),r[c]=function(){var r=arguments.length;if(r!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];var l=function(t){var e=nt(t);if(n.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+e.join(","));if(!Z(n,function(t){return H(e,t)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+n.join(", "));return t[c].apply(null,o)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:l,log:function(e){t.console.log(e,{constructors:n,constructor:c,params:o})}}}}),r},ci={generate:ui},ai=ci.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),li=function(t,e,n,r){return t.fold(e,n,r)},fi={cata:li,none:ai.none,multiple:ai.multiple,single:ai.single},si=function(t,e){return fi.cata(e.get(),w([]),y,w([t]))},di=function(t,e){var n=function(t){return It(t,"rowspan")&&parseInt(Pt(t,"rowspan"),10)>1||It(t,"colspan")&&parseInt(Pt(t,"colspan"),10)>1},r=si(t,e);return r.length>0&&Z(r,n)?E.some(r):E.none()},mi=function(t,e){return fi.cata(e.get(),E.none,function(e,n){return 0===e.length?E.none():ri.retrieveBox(t,ii.firstSelectedSelector(),ii.lastSelectedSelector()).bind(function(t){return e.length>1?E.some({bounds:w(t),cells:w(e)}):E.none()})},E.none)},gi={mergable:mi,unmergable:di,selection:si},hi=function(t){return{element:w(t),mergable:E.none,unmergable:E.none,selection:w([t])}},pi=function(t,e,n){return{element:w(n),mergable:w(gi.mergable(e,t)),unmergable:w(gi.unmergable(n,t)),selection:w(gi.selection(n,t))}},vi=function(t){return hi(t)},bi=ut("element","clipboard","generators"),wi=function(t,e,n,r,o){return{element:w(n),mergable:E.none,unmergable:E.none,selection:w(gi.selection(n,t)),clipboard:w(r),generators:w(o)}},yi={noMenu:hi,forMenu:pi,notCell:vi,paste:bi,pasteRows:wi},xi=function(t){return ur.table(t[0]).map(_r).map(function(t){return[Rr.extract(t,ii.attributeSelector())]})},Ci=function(t,e){return U(e,function(e){return t.selection.serializer.serialize(e.dom(),{})}).join("")},Ri=function(t){return U(t,function(t){return t.dom().innerText}).join("")},Si=function(t,e,n,r){t.on("BeforeGetContent",function(n){var r=function(e){n.preventDefault(),xi(e).each(function(e){n.content="text"===n.format?Ri(e):Ci(t,e)})};!0===n.selection&&fi.cata(e.get(),v,r,v)}),t.on("BeforeSetContent",function(e){if(!0===e.selection&&!0===e.paste){E.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(o){var i=Xt.fromDom(o);ur.table(i).each(function(o){var u=V(Xr(e.content),function(t){return"meta"!==St(t)});if(1===u.length&&"table"===St(u[0])){e.preventDefault();var c=Xt.fromDom(t.getDoc()),a=Yr.paste(c),l=yi.paste(i,u[0],a);n.pasteCells(o,l).each(function(e){t.selection.setRng(e),t.focus(),r.clear(o)})}})})}})},Ti={registerEvents:Si},Di=o("height",function(t){var e=t.dom();return Jt(t)?e.getBoundingClientRect().height:e.offsetHeight}),Ai=function(t){return Di.get(t)},Oi=function(t){return Di.getOuter(t)},Ei=o("width",function(t){return t.dom().offsetWidth}),ki=function(t){return Ei.get(t)},Ni=function(t){return Ei.getOuter(t)},Bi=Fe.detect(),Pi=function(){return Bi.browser.isIE()||Bi.browser.isEdge()},Ii=function(t,e){var n=parseFloat(t);return isNaN(n)?e:n},Wi=function(t,e,n){return Ii(ne(t,e),n)},Mi=function(t){var e=Wi(t,"padding-top",0),n=Wi(t,"padding-bottom",0),r=Wi(t,"border-top-width",0),o=Wi(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height,u=ne(t,"box-sizing"),c=r+o;return"border-box"===u?i:i-e-n-c},_i=function(t){return Wi(t,"width",ki(t))},Li=function(t){return Pi()?Mi(t):Wi(t,"height",Ai(t))},Fi={getWidth:_i,getHeight:Li},ji=/(\d+(\.\d+)?)(\w|%)*/,Hi=/(\d+(\.\d+)?)%/,zi=/(\d+(\.\d+)?)px|em/,Ui=function(t,e){te(t,"width",e+"px")},qi=function(t,e){te(t,"width",e+"%")},Gi=function(t,e){te(t,"height",e+"px")},Vi=function(t){return oe(t,"height").getOrThunk(function(){return Fi.getHeight(t)+"px"})},Yi=function(t,e,n,r){var o=ur.table(t).map(function(t){var r=n(t);return Math.floor(e/100*r)}).getOr(e);return r(t,o),o},Xi=function(t,e,n,r){var o=parseInt(t,10);return Ft(t,"%")&&"table"!==St(e)?Yi(e,o,n,r):o},Ji=function(t){var e=Vi(t);return e?Xi(e,t,Ai,Gi):Ai(t)},Ki=function(t,e,n){return n(t)/$i(t,e)},$i=function(t,e){return It(t,e)?parseInt(Pt(t,e),10):1},Qi=function(t){return oe(t,"width").fold(function(){return E.from(Pt(t,"width"))},function(t){return E.some(t)})},Zi=function(t,e){return t/e.pixelWidth()*100},tu=function(t,e,n){var r=Hi.exec(e);if(null!==r)return parseFloat(r[1]);var o=ki(t);return Zi(o,n)},eu=function(t,e){return Qi(t).fold(function(){var n=ki(t);return Zi(n,e)},function(n){return tu(t,n,e)})},nu=function(t,e){return t/100*e.pixelWidth()},ru=function(t,e,n){var r=zi.exec(e);if(null!==r)return parseInt(r[1],10);var o=Hi.exec(e);if(null!==o){var i=parseFloat(o[1]);return nu(i,n)}return ki(t)},ou=function(t,e){return Qi(t).fold(function(){return ki(t)},function(n){return ru(t,n,e)})},iu=function(t){return Ki(t,"rowspan",Ji)},uu=function(t){return Qi(t).bind(function(t){var e=ji.exec(t);return null!==e?E.some({width:w(parseFloat(e[1])),unit:w(e[3])}):E.none()})},cu=function(t,e,n){te(t,"width",e+n)},au={percentageBasedSizeRegex:w(Hi),pixelBasedSizeRegex:w(zi),setPixelWidth:Ui,setPercentageWidth:qi,setHeight:Gi,getPixelWidth:ou,getPercentageWidth:eu,getGenericWidth:uu,setGenericWidth:cu,getHeight:iu,getRawWidth:Qi},lu=function(t,e){au.getGenericWidth(t).each(function(n){var r=n.width()/2;au.setGenericWidth(t,r,n.unit()),au.setGenericWidth(e,r,n.unit())})},fu={halve:lu},su=function(t,e){var n=function(n,r){return su(t+n,e+r)};return{left:w(t),top:w(e),translate:n}},du=su,mu=function(t){var e=t.getBoundingClientRect();return du(e.left,e.top)},gu=function(t,e){return void 0!==t?t:void 0!==e?e:0},hu=function(t){var e=t.dom().ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement,i=gu(r.pageYOffset,o.scrollTop),u=gu(r.pageXOffset,o.scrollLeft),c=gu(o.clientTop,n.clientTop),a=gu(o.clientLeft,n.clientLeft);return pu(t).translate(u-a,i-c)},pu=function(t){var e=t.dom(),n=e.ownerDocument,r=n.body;return r===e?du(r.offsetLeft,r.offsetTop):Jt(t)?mu(e):du(0,0)},vu=ut("row","y"),bu=ut("col","x"),wu=function(t){return hu(t).left()+Ni(t)},yu=function(t){return hu(t).left()},xu=function(t,e){return bu(t,yu(e))},Cu=function(t,e){return bu(t,wu(e))},Ru=function(t){return hu(t).top()},Su=function(t,e){return vu(t,Ru(e))},Tu=function(t,e){return vu(t,Ru(e)+Oi(e))},Du=function(t,e,n){if(0===n.length)return[];var r=U(n.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),o=n[n.length-1].map(function(t){return e(n.length-1,t)});return r.concat([o])},Au=function(t){return-t},Ou={delta:y,positions:function(t){return Du(Su,Tu,t)},edge:Ru},Eu={delta:y,edge:yu,positions:function(t){return Du(xu,Cu,t)}},ku={delta:Au,edge:wu,positions:function(t){return Du(Cu,xu,t)}},Nu={height:Ou,rtl:ku,ltr:Eu},Bu={ltr:Nu.ltr,rtl:Nu.rtl},Pu=function(t){var e=lr.fromTable(t);return pr.generate(e).grid()},Iu={getGridSize:Pu},Wu=function(){return Wu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Wu.apply(this,arguments)},Mu=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},_u=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return E.none()},Lu=function(t,e,n,r){n===r?Wt(t,e):Nt(t,e,n)},Fu=function(t,e){var n=[],r=[],o=function(e,o){var i=Hn(t,o).getOrThunk(function(){var e=Xt.fromTag(o,Qe(t).dom());return sn(t,e),e});pn(i);var u=U(e,function(t){t.isNew()&&n.push(t.element());var e=t.element();return pn(e),q(t.cells(),function(t){t.isNew()&&r.push(t.element()),Lu(t.element(),"colspan",t.colspan(),1),Lu(t.element(),"rowspan",t.rowspan(),1),sn(e,t.element())}),e});hn(i,u)},i=function(e){Hn(t,e).each(vn)},u=function(t,e){t.length>0?o(t,e):i(e)},c=[],a=[],l=[];return q(e,function(t){switch(t.section()){case"thead":c.push(t);break;case"tbody":a.push(t);break;case"tfoot":l.push(t)}}),u(c,"thead"),u(a,"tbody"),u(l,"tfoot"),{newRows:w(n),newCells:w(r)}},ju=function(t){return U(t,function(t){var e=Mr(t.element());return q(t.cells(),function(t){var n=_r(t.element());Lu(n,"colspan",t.colspan(),1),Lu(n,"rowspan",t.rowspan(),1),sn(e,n)}),e})},Hu={render:Fu,copy:ju},zu=function(t,e){var n=Pt(t,e);return void 0===n||""===n?[]:n.split(" ")},Uu=function(t,e,n){var r=zu(t,e),o=r.concat([n]);return Nt(t,e,o.join(" ")),!0},qu=function(t,e,n){var r=V(zu(t,e),function(t){return t!==n});return r.length>0?Nt(t,e,r.join(" ")):Wt(t,e),!1},Gu=function(t){return void 0!==t.dom().classList},Vu=function(t){return zu(t,"class")},Yu=function(t,e){return Uu(t,"class",e)},Xu=function(t,e){return qu(t,"class",e)},Ju=function(t,e){Gu(t)?t.dom().classList.add(e):Yu(t,e)},Ku=function(t){0===(Gu(t)?t.dom().classList:Vu(t)).length&&Wt(t,"class")},$u=function(t,e){if(Gu(t)){t.dom().classList.remove(e)}else Xu(t,e);Ku(t)},Qu=function(t,e){return Gu(t)&&t.dom().classList.contains(e)},Zu=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},tc=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},ec=function(t,e){if(e<0||e>=t.length-1)return E.none();var n=t[e].fold(function(){var n=tt(t.slice(0,e));return _u(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return E.some({value:t,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return _u(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return E.some({value:t,delta:1})});return n.bind(function(t){return r.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})},nc=function(t){var e=t.grid(),n=tc(0,e.columns()),r=tc(0,e.rows());return U(n,function(e){return rc(function(){return Q(r,function(n){return pr.getAt(t,n,e).filter(function(t){return t.column()===e}).fold(w([]),function(t){return[t]})})},function(t){return 1===t.colspan()},function(){return pr.getAt(t,0,e)})})},rc=function(t,e,n){var r=t();return J(r,e).orThunk(function(){return E.from(r[0]).orThunk(n)}).map(function(t){return t.element()})},oc=function(t){var e=t.grid(),n=tc(0,e.rows()),r=tc(0,e.columns());return U(n,function(e){return rc(function(){return Q(r,function(n){return pr.getAt(t,e,n).filter(function(t){return t.row()===e}).fold(w([]),function(t){return[t]})})},function(t){return 1===t.rowspan()},function(){return pr.getAt(t,e,0)})})},ic={columns:nc,rows:oc},uc=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},cc=uc("ephox-snooker"),ac={resolve:cc.resolve},lc=function(t,e,n,r,o){var i=Xt.fromTag("div");return ee(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Bt(i,{"data-column":t,role:"presentation"}),i},fc=function(t,e,n,r,o){var i=Xt.fromTag("div");return ee(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),Bt(i,{"data-row":t,role:"presentation"}),i},sc={col:lc,row:fc},dc=ac.resolve("resizer-bar"),mc=ac.resolve("resizer-rows"),gc=ac.resolve("resizer-cols"),hc=function(t){var e=Wn(t.parent(),"."+dc);q(e,vn)},pc=function(t,e,n){var r=t.origin();q(e,function(e,o){e.each(function(e){var o=n(r,e);Ju(o,dc),sn(t.parent(),o)})})},vc=function(t,e,n,r){pc(t,e,function(t,e){var o=sc.col(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return Ju(o,gc),o})},bc=function(t,e,n,r){pc(t,e,function(t,e){var o=sc.row(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return Ju(o,mc),o})},wc=function(t,e,n,r,o,i){var u=hu(e),c=n.length>0?o.positions(n,e):[];bc(t,c,u,Ni(e));var a=r.length>0?i.positions(r,e):[];vc(t,a,u,Oi(e))},yc=function(t,e,n,r){hc(t);var o=lr.fromTable(e),i=pr.generate(o),u=ic.rows(i),c=ic.columns(i);wc(t,e,u,c,n,r)},xc=function(t,e){var n=Wn(t.parent(),"."+dc);q(n,e)},Cc=function(t){xc(t,function(t){te(t,"display","none")})},Rc=function(t){xc(t,function(t){te(t,"display","block")})},Sc=function(t){return Qu(t,mc)},Tc=function(t){return Qu(t,gc)},Dc={refresh:yc,hide:Cc,show:Rc,destroy:hc,isRowBar:Sc,isColBar:Tc},Ac=function(t,e,n){var r=t.cells(),o=r.slice(0,e),i=r.slice(e),u=o.concat([n]).concat(i);return Ec(t,u)},Oc=function(t,e,n){t.cells()[e]=n},Ec=function(t,e){return An(e,t.section())},kc=function(t,e){var n=t.cells(),r=U(n,e);return An(r,t.section())},Nc=function(t,e){return t.cells()[e]},Bc=function(t,e){return Nc(t,e).element()},Pc=function(t){return t.cells().length},Ic={addCell:Ac,setCells:Ec,mutateCell:Oc,getCell:Nc,getCellElement:Bc,mapCells:kc,cellLength:Pc},Wc=function(t,e){return U(t,function(t){return Ic.getCell(t,e)})},Mc=function(t,e){return t[e]},_c=function(t,e){if(0===t.length)return 0;var n=t[0];return K(t,function(t){return!e(n.element(),t.element())}).fold(function(){return t.length},function(t){return t})},Lc=function(t,e,n,r){var o=Mc(t,e).cells().slice(n),i=_c(o,r),u=Wc(t,n).slice(e),c=_c(u,r);return{colspan:w(i),rowspan:w(c)}},Fc={subgrid:Lc},jc=function(t,e){var n=U(t,function(t,e){return U(t.cells(),function(t,e){return!1})}),r=function(t,e,r,o){for(var i=t;i<t+r;i++)for(var u=e;u<e+o;u++)n[i][u]=!0};return U(t,function(o,i){var u=Q(o.cells(),function(o,u){if(!1===n[i][u]){var c=Fc.subgrid(t,i,u,e);return r(i,u,c.rowspan(),c.colspan()),[Cn(o.element(),c.rowspan(),c.colspan(),o.isNew())]}return[]});return On(u,o.section())})},Hc=function(t,e,n){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],u=0;u<t.grid().columns();u++){var c=pr.getAt(t,o,u).map(function(t){return Tn(t.element(),n)}).getOrThunk(function(){return Tn(e.gap(),!0)});i.push(c)}var a=An(i,t.all()[o].section());r.push(a)}return r},zc={toDetails:jc,toGrid:Hc},Uc=function(t,e){return zc.toGrid(t,e,!1)},qc=function(t,e){var n=function(t){return _u(t,function(t){return tn(t.element()).map(function(t){var e=tn(t).isNone();return Tn(t,e)})}).getOrThunk(function(){return Tn(e.row(),!0)})};return U(t,function(t){var e=n(t.details());return Dn(e.element(),t.details(),t.section(),e.isNew())})},Gc=function(t,e){var n=zc.toDetails(t,Ve);return qc(n,e)},Vc=function(t,e){var n=$(U(t.all(),function(t){return t.cells()}));return J(n,function(t){return Ve(e,t.element())})},Yc=function(t,e,n,r,o){return function(i,u,c,a,l){var f=lr.fromTable(u),s=pr.generate(f);return e(s,c).map(function(e){var n=Uc(s,a),r=t(n,e,Ve,o(a)),i=Gc(r.grid(),a);return{grid:w(i),cursor:r.cursor}}).fold(function(){return E.none()},function(t){var e=Hu.render(u,t.grid());return n(u,t.grid(),l),r(u),Dc.refresh(i,u,Nu.height,l),E.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})})}},Xc=function(t,e){return ur.cell(e.element()).bind(function(e){return Vc(t,e)})},Jc=function(t,e){return ur.cell(e.element()).bind(function(n){return Vc(t,n).map(function(t){return Wu(Wu({},t),{generators:e.generators,clipboard:e.clipboard})})})},Kc=function(t,e){var n=U(e.selection(),function(e){return ur.cell(e).bind(function(e){return Vc(t,e)})}),r=Mu(n);return r.length>0?E.some({cells:r,generators:e.generators,clipboard:e.clipboard}):E.none()},$c=function(t,e){return e.mergable()},Qc=function(t,e){return e.unmergable()},Zc=function(t,e){var n=U(e.selection(),function(e){return ur.cell(e).bind(function(e){return Vc(t,e)})}),r=Mu(n);return r.length>0?E.some(r):E.none()},ta=function(t){var e=function(e){return t===e},n=function(e){return ta(t)},r=function(e){return ta(t)},o=function(e){return ta(e(t))},i=function(e){return ta(t)},u=function(e){e(t)},c=function(e){return e(t)},a=function(e,n){return n(t)},l=function(e){return e(t)},f=function(e){return e(t)},s=function(){return E.some(t)};return{is:e,isValue:S,isError:R,getOr:w(t),getOrThunk:w(t),getOrDie:w(t),or:n,orThunk:r,fold:a,map:o,mapError:i,each:u,bind:c,exists:l,forall:f,toOption:s}},ea=function(t){var e=function(t){return t()},n=function(){return C(String(t))()},r=function(t){return t},o=function(t){return t()},i=function(e){return ea(t)},u=function(e){return ea(e(t))},c=function(e){return ea(t)};return{is:R,isValue:R,isError:S,getOr:y,getOrThunk:e,getOrDie:n,or:r,orThunk:o,fold:function(e,n){return e(t)},map:i,mapError:u,each:v,bind:c,exists:R,forall:S,toOption:E.none}},na=function(t,e){return t.fold(function(){return ea(e)},ta)},ra={value:ta,error:ea,fromOption:na},oa=function(t,e,n){if(t.row()>=e.length||t.column()>Ic.cellLength(e[0]))return ra.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),o=r[0].cells().slice(t.column()),i=Ic.cellLength(n[0]),u=n.length;return ra.value({rowDelta:w(r.length-u),colDelta:w(o.length-i)})},ia=function(t,e){var n=Ic.cellLength(t[0]),r=Ic.cellLength(e[0]);return{rowDelta:w(0),colDelta:w(n-r)}},ua=function(t,e){return U(t,function(){return Tn(e.cell(),!0)})},ca=function(t,e,n){return t.concat(Zu(e,function(e){return Ic.setCells(t[t.length-1],ua(t[t.length-1].cells(),n))}))},aa=function(t,e,n){return U(t,function(t){return Ic.setCells(t,t.cells().concat(ua(tc(0,e),n)))})},la=function(t,e,n){var r=e.colDelta()<0?aa:y;return(e.rowDelta()<0?ca:y)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},fa={measure:oa,measureWidth:ia,tailor:la},sa=function(t,e,n,r){if(0===t.length)return t;for(var o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)Ic.mutateCell(t[o],i,Tn(r(),!1));return t},da=function(t,e,n,r){for(var o=!0,i=0;i<t.length;i++)for(var u=0;u<Ic.cellLength(t[0]);u++){var c=Ic.getCellElement(t[i],u),a=n(c,e);!0===a&&!1===o?Ic.mutateCell(t[i],u,Tn(r(),!0)):!0===a&&(o=!1)}return t},ma=function(t,e){return X(t,function(t,n){return z(t,function(t){return e(t.element(),n.element())})?t:t.concat([n])},[])},ga=function(t,e,n,r){if(e>0&&e<t.length){var o=t[e-1].cells(),i=ma(o,n);q(i,function(o){for(var i=E.none(),u=e;u<t.length;u++)!function(e){for(var u=0;u<Ic.cellLength(t[0]);u++)!function(u){var c=t[e].cells()[u];n(c.element(),o.element())&&(i.isNone()&&(i=E.some(r())),i.each(function(n){Ic.mutateCell(t[e],u,Tn(n,!0))}))}(u)}(u)})}return t},ha={merge:sa,unmerge:da,splitRows:ga},pa=function(t,n,r,o){var i=Ic.getCell(t[n],r),u=e(o,i.element()),c=t[n];return t.length>1&&Ic.cellLength(c)>1&&(r>0&&u(Ic.getCellElement(c,r-1))||r<c.cells().length-1&&u(Ic.getCellElement(c,r+1))||n>0&&u(Ic.getCellElement(t[n-1],r))||n<t.length-1&&u(Ic.getCellElement(t[n+1],r)))},va=function(t,e,n,r,o){for(var i=t.row(),u=t.column(),c=n.length,a=Ic.cellLength(n[0]),l=i+c,f=u+a,s=i;s<l;s++)for(var d=u;d<f;d++){pa(e,s,d,o)&&ha.unmerge(e,Ic.getCellElement(e[s],d),o,r.cell);var m=Ic.getCellElement(n[s-i],d-u),g=r.replace(m);Ic.mutateCell(e[s],d,Tn(g,!0))}return e},ba=function(t,e,n,r,o){return fa.measure(t,e,n).map(function(i){var u=fa.tailor(e,i,r);return va(t,u,n,r,o)})},wa=function(t,e,n,r,o){ha.splitRows(e,t,o,r.cell);var i=fa.measureWidth(n,e),u=fa.tailor(n,i,r),c=fa.measureWidth(e,u),a=fa.tailor(e,c,r);return a.slice(0,t).concat(u).concat(a.slice(t,a.length))},ya={merge:ba,insert:wa},xa=function(t,e,n,r,o){var i=t.slice(0,e),u=t.slice(e),c=Ic.mapCells(t[n],function(n,i){return e>0&&e<t.length&&r(Ic.getCellElement(t[e-1],i),Ic.getCellElement(t[e],i))?Ic.getCell(t[e],i):Tn(o(n.element(),r),!0)});return i.concat([c]).concat(u)},Ca=function(t,e,n,r,o){return U(t,function(t){var i=e>0&&e<Ic.cellLength(t)&&r(Ic.getCellElement(t,e-1),Ic.getCellElement(t,e)),u=i?Ic.getCell(t,e):Tn(o(Ic.getCellElement(t,n),r),!0);return Ic.addCell(t,e,u)})},Ra=function(t,e,n,r,o){var i=n+1;return U(t,function(t,u){var c=u===e,a=c?Tn(o(Ic.getCellElement(t,n),r),!0):Ic.getCell(t,n);return Ic.addCell(t,i,a)})},Sa=function(t,e,n,r,o){var i=e+1,u=t.slice(0,i),c=t.slice(i),a=Ic.mapCells(t[e],function(t,e){return e===n?Tn(o(t.element(),r),!0):t});return u.concat([a]).concat(c)},Ta=function(t,e,n){var r=U(t,function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return An(r,t.section())});return V(r,function(t){return t.cells().length>0})},Da=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},Aa={insertRowAt:xa,insertColumnAt:Ca,splitCellIntoColumns:Ra,splitCellIntoRows:Sa,deleteRowsAt:Da,deleteColumnsAt:Ta},Oa=function(t,e,n,r){var o=function(t){return z(e,function(e){return n(t.element(),e.element())})};return U(t,function(t){return Ic.mapCells(t,function(t){return o(t)?Tn(r(t.element(),n),!0):t})})},Ea=function(t,e,n,r){return void 0!==Ic.getCellElement(t[e],n)&&e>0&&r(Ic.getCellElement(t[e-1],n),Ic.getCellElement(t[e],n))},ka=function(t,e,n){return e>0&&n(Ic.getCellElement(t,e-1),Ic.getCellElement(t,e))},Na=function(t,e,n,r){var o=Q(t,function(r,o){return Ea(t,o,e,n)||ka(r,e,n)?[]:[Ic.getCell(r,e)]});return Oa(t,o,n,r)},Ba=function(t,e,n,r){var o=t[e],i=Q(o.cells(),function(r,i){return Ea(t,e,i,n)||ka(o,i,n)?[]:[r]});return Oa(t,i,n,r)},Pa={replaceColumn:Na,replaceRow:Ba},Ia=ci.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Wa=Wu({},Ia),Ma=function(t,e){return 0===t.length?Wa.none():1===t.length?Wa.only(0):0===e?Wa.left(0,1):e===t.length-1?Wa.right(e-1,e):e>0&&e<t.length-1?Wa.middle(e-1,e,e+1):Wa.none()},_a=function(t,e,n,r){var o=t.slice(0),i=Ma(t,e),u=function(t){return U(t,w(0))},c=w(u(o)),a=function(t){return r.singleColumnWidth(o[t],n)},l=function(t,e){if(n>=0){var i=Math.max(r.minCellWidth(),o[e]-n);return u(o.slice(0,t)).concat([n,i-o[e]]).concat(u(o.slice(e+1)))}var c=Math.max(r.minCellWidth(),o[t]+n),a=o[t]-c;return u(o.slice(0,t)).concat([c-o[t],a]).concat(u(o.slice(e+1)))},f=l,s=function(t,e,n){return l(e,n)},d=function(t,e){if(n>=0)return u(o.slice(0,e)).concat([n]);var i=Math.max(r.minCellWidth(),o[e]+n);return u(o.slice(0,e)).concat([i-o[e]])};return i.fold(c,a,f,s,d)},La={determine:_a},Fa=function(t,e){return It(t,e)&&parseInt(Pt(t,e),10)>1},ja=function(t){return Fa(t,"colspan")},Ha=function(t){return Fa(t,"rowspan")},za=function(t,e){return parseInt(ne(t,e),10)},Ua={hasColspan:ja,hasRowspan:Ha,minWidth:w(10),minHeight:w(10),getInt:za},qa=function(t,e,n){return oe(t,e).fold(function(){return n(t)+"px"},function(t){return t})},Ga=function(t,e){return qa(t,"width",function(t){return au.getPixelWidth(t,e)})},Va=function(t){return qa(t,"height",au.getHeight)},Ya=function(t,e,n,r,o){var i=ic.columns(t),u=U(i,function(t){return t.map(e.edge)});return U(i,function(t,e){return t.filter(x(Ua.hasColspan)).fold(function(){var t=ec(u,e);return r(t)},function(t){return n(t,o)})})},Xa=function(t){return t.map(function(t){return t+"px"}).getOr("")},Ja=function(t,e,n){return Ya(t,e,Ga,Xa,n)},Ka=function(t,e,n){return Ya(t,e,au.getPercentageWidth,function(t){return t.fold(function(){return n.minCellWidth()},function(t){return t/n.pixelWidth()*100})},n)},$a=function(t,e,n){return Ya(t,e,au.getPixelWidth,function(t){return t.getOrThunk(n.minCellWidth)},n)},Qa=function(t,e,n,r){var o=ic.rows(t),i=U(o,function(t){return t.map(e.edge)});return U(o,function(t,e){return t.filter(x(Ua.hasRowspan)).fold(function(){var t=ec(i,e);return r(t)},function(t){return n(t)})})},Za=function(t,e){return Qa(t,e,au.getHeight,function(t){return t.getOrThunk(Ua.minHeight)})},tl=function(t,e){return Qa(t,e,Va,Xa)},el={getRawWidths:Ja,getPixelWidths:$a,getPercentageWidths:Ka,getPixelHeights:Za,getRawHeights:tl},nl=function(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r},rl=function(t,e){var n=pr.justCells(t);return U(n,function(t){var n=nl(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:w(n),colspan:t.colspan}})},ol=function(t,e){var n=pr.justCells(t);return U(n,function(t){var n=nl(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:w(n),rowspan:t.rowspan}})},il=function(t,e){return U(t.all(),function(t,n){return{element:t.element,height:w(e[n])}})},ul={recalculateWidth:rl,recalculateHeight:ol,matchRowHeight:il},cl=function(t,e){var n=parseFloat(t),r=ki(e),o=function(t){return t/r*100},i=function(t,e){return[100-t]},u=function(){return Ua.minWidth()/r*100},c=function(t,e,r){var o=r/100,i=o*n;au.setPercentageWidth(t,n+i)};return{width:w(n),pixelWidth:w(r),getWidths:el.getPercentageWidths,getCellDelta:o,singleColumnWidth:i,minCellWidth:u,setElementWidth:au.setPercentageWidth,setTableWidth:c}},al=function(t){var e=y,n=function(t,e){return[Math.max(Ua.minWidth(),t+e)-t]},r=function(t,e,n){var r=Y(e,function(t,e){return t+e},0);au.setPixelWidth(t,r)};return{width:w(t),pixelWidth:w(t),getWidths:el.getPixelWidths,getCellDelta:e,singleColumnWidth:n,minCellWidth:Ua.minWidth,setElementWidth:au.setPixelWidth,setTableWidth:r}},ll=function(t,e){var n=au.percentageBasedSizeRegex().exec(e);if(null!==n)return cl(n[1],t);var r=au.pixelBasedSizeRegex().exec(e);if(null!==r){var o=parseInt(r[1],10);return al(o)}var i=ki(t);return al(i)},fl=function(t){return au.getRawWidth(t).fold(function(){var e=ki(t);return al(e)},function(e){return ll(t,e)})},sl={getTableSize:fl},dl=function(t){return pr.generate(t)},ml=function(t){return Y(t,function(t,e){return t+e},0)},gl=function(t){var e=lr.fromTable(t);return dl(e)},hl=function(t,e,n,r){var o=sl.getTableSize(t),i=o.getCellDelta(e),u=gl(t),c=o.getWidths(u,r,o),a=La.determine(c,n,i,o),l=U(a,function(t,e){return t+c[e]}),f=ul.recalculateWidth(u,l);q(f,function(t){o.setElementWidth(t.element(),t.width())}),n===u.grid().columns()-1&&o.setTableWidth(t,l,i)},pl=function(t,e,n,r){var o=gl(t),i=el.getPixelHeights(o,r),u=U(i,function(t,r){return n===r?Math.max(e+t,Ua.minHeight()):t}),c=ul.recalculateHeight(o,u),a=ul.matchRowHeight(o,u);q(a,function(t){au.setHeight(t.element(),t.height())}),q(c,function(t){au.setHeight(t.element(),t.height())});var l=ml(u);au.setHeight(t,l)},vl=function(t,e,n){var r=sl.getTableSize(t),o=dl(e),i=r.getWidths(o,n,r),u=ul.recalculateWidth(o,i);q(u,function(t){r.setElementWidth(t.element(),t.width())}),u.length>0&&r.setTableWidth(t,i,r.getCellDelta(0))},bl={adjustWidth:hl,adjustHeight:pl,adjustWidthTo:vl},wl=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return wl(n())}}},yl=function(t,e){return xl(t,e,{validate:W,label:"function"})},xl=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return ft("required",e),dt(e),function(r){var o=nt(r);Z(e,function(t){return H(o,t)})||at(e,o),t(e,o);var i=V(e,function(t){return!n.validate(r[t],t)});return i.length>0&&st(i,n.label),r}},Cl=function(t,e){var n=V(e,function(e){return!H(t,e)});n.length>0&&lt(n)},Rl=function(t){return yl(Cl,t)},Sl=Rl(["cell","row","replace","gap"]),Tl=function(t){var e=It(t,"colspan")?parseInt(Pt(t,"colspan"),10):1,n=It(t,"rowspan")?parseInt(Pt(t,"rowspan"),10):1;return{element:w(t),colspan:w(e),rowspan:w(n)}},Dl=function(t,e){void 0===e&&(e=Tl),Sl(t);var n=wl(E.none()),r=function(e){return t.cell(e)},o=function(t){var n=e(t);return r(n)},i=function(t){var e=o(t);return n.get().isNone()&&n.set(E.some(e)),u=E.some({item:t,replacement:e}),e},u=E.none();return{getOrInit:function(t,e){return u.fold(function(){return i(t)},function(n){return e(t,n.item)?n.replacement:i(t)})},cursor:n.get}},Al=function(t,e){return function(n){var r=wl(E.none());Sl(n);var o=[],i=function(t,e){return J(o,function(n){return e(n.item,t)})},u=function(i){var u={scope:t},c=n.replace(i,e,u);return o.push({item:i,sub:c}),r.get().isNone()&&r.set(E.some(c)),c};return{replaceOrInit:function(t,e){return i(t,e).fold(function(){return u(t)},function(n){return e(t,n.item)?n.sub:u(t)})},cursor:r.get}}},Ol=function(t){Sl(t);var e=wl(E.none());return{combine:function(n){return e.get().isNone()&&e.set(E.some(n)),function(){var e=t.cell({element:w(n),colspan:w(1),rowspan:w(1)});return ie(e,"width"),ie(n,"width"),e}},cursor:e.get}},El={modification:Dl,transform:Al,merging:Ol},kl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Nl=function(t,e){var n=t.property().name(e);return H(["ol","ul"],n)},Bl=function(t,e){var n=t.property().name(e);return H(kl,n)},Pl=function(t,e){var n=t.property().name(e);return H(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},Il=function(t,e){var n=t.property().name(e);return H(["h1","h2","h3","h4","h5","h6"],n)},Wl=function(t,e){return H(["div","li","td","th","blockquote","body","caption"],t.property().name(e))},Ml=function(t,e){return H(["br","img","hr","input"],t.property().name(e))},_l=function(t,e){return"iframe"===t.property().name(e)},Ll=function(t,e){return!(Bl(t,e)||Ml(t,e))&&"li"!==t.property().name(e)},Fl={isBlock:Bl,isList:Nl,isFormatting:Pl,isHeading:Il,isContainer:Wl,isEmptyTag:Ml,isFrame:_l,isInline:Ll},jl=r(),Hl=function(t){return Fl.isBlock(jl,t)},zl=function(t){return Fl.isList(jl,t)},Ul=function(t){return Fl.isFormatting(jl,t)},ql=function(t){return Fl.isHeading(jl,t)},Gl=function(t){return Fl.isContainer(jl,t)},Vl=function(t){return Fl.isEmptyTag(jl,t)},Yl=function(t){return Fl.isFrame(jl,t)},Xl=function(t){return Fl.isInline(jl,t)},Jl={isBlock:Hl,isList:zl,isFormatting:Ul,isHeading:ql,isContainer:Gl,isEmptyTag:Vl,isFrame:Yl,isInline:Xl},Kl=function(t){var e=function(t){return"br"===St(t)},n=function(t){return Z(t,function(t){return e(t)||Et(t)&&0===Tr(t).trim().length})},r=function(t){return"li"===St(t)||Mn(t,Jl.isList).isSome()},o=function(t){return rn(t).map(function(t){return!!Jl.isBlock(t)||!!Jl.isEmptyTag(t)&&"img"!==St(t)}).getOr(!1)},i=function(t){return Pr(t).bind(function(n){var i=o(n);return tn(n).map(function(o){return!0===i||r(o)||e(n)||Jl.isBlock(o)&&!Ve(t,o)?[]:[Xt.fromTag("br")]})}).getOr([])},u=function(){var e=Q(t,function(t){var e=on(t);return n(e)?[]:e.concat(i(t))});return 0===e.length?[Xt.fromTag("br")]:e}();pn(t[0]),hn(t[0],u)},$l={merge:Kl},Ql=function(t){0===ur.cells(t).length&&vn(t)},Zl=ut("grid","cursor"),tf=function(t,e,n){return ef(t,e,n).orThunk(function(){return ef(t,0,0)})},ef=function(t,e,n){return E.from(t[e]).bind(function(t){return E.from(t.cells()[n]).bind(function(t){return E.from(t.element())})})},nf=function(t,e,n){return Zl(t,ef(t,e,n))},rf=function(t){return X(t,function(t,e){return z(t,function(t){return t.row()===e.row()})?t:t.concat([e])},[]).sort(function(t,e){return t.row()-e.row()})},of=function(t){return X(t,function(t,e){return z(t,function(t){return t.column()===e.column()})?t:t.concat([e])},[]).sort(function(t,e){return t.column()-e.column()})},uf=function(t,e,n,r){var o=e.row(),i=e.row(),u=Aa.insertRowAt(t,i,o,n,r.getOrInit);return nf(u,i,e.column())},cf=function(t,e,n,r){var o=e[0].row(),i=e[0].row(),u=rf(e),c=X(u,function(t,e){return Aa.insertRowAt(t,i,o,n,r.getOrInit)},t);return nf(c,i,e[0].column())},af=function(t,e,n,r){var o=e.row(),i=e.row()+e.rowspan(),u=Aa.insertRowAt(t,i,o,n,r.getOrInit);return nf(u,i,e.column())},lf=function(t,e,n,r){var o=rf(e),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),c=X(o,function(t,e){return Aa.insertRowAt(t,u,i,n,r.getOrInit)},t);return nf(c,u,e[0].column())},ff=function(t,e,n,r){var o=e.column(),i=e.column(),u=Aa.insertColumnAt(t,i,o,n,r.getOrInit);return nf(u,e.row(),i)},sf=function(t,e,n,r){var o=of(e),i=o[0].column(),u=o[0].column(),c=X(o,function(t,e){return Aa.insertColumnAt(t,u,i,n,r.getOrInit)},t);return nf(c,e[0].row(),u)},df=function(t,e,n,r){var o=e.column(),i=e.column()+e.colspan(),u=Aa.insertColumnAt(t,i,o,n,r.getOrInit);return nf(u,e.row(),i)},mf=function(t,e,n,r){var o=e[e.length-1].column(),i=e[e.length-1].column()+e[e.length-1].colspan(),u=of(e),c=X(u,function(t,e){return Aa.insertColumnAt(t,i,o,n,r.getOrInit)},t);return nf(c,e[0].row(),i)},gf=function(t,e,n,r){var o=Pa.replaceRow(t,e.row(),n,r.replaceOrInit);return nf(o,e.row(),e.column())},hf=function(t,e,n,r){var o=Pa.replaceColumn(t,e.column(),n,r.replaceOrInit);return nf(o,e.row(),e.column())},pf=function(t,e,n,r){var o=Pa.replaceRow(t,e.row(),n,r.replaceOrInit);return nf(o,e.row(),e.column())},vf=function(t,e,n,r){var o=Pa.replaceColumn(t,e.column(),n,r.replaceOrInit);return nf(o,e.row(),e.column())},bf=function(t,e,n,r){var o=Aa.splitCellIntoColumns(t,e.row(),e.column(),n,r.getOrInit);return nf(o,e.row(),e.column())},wf=function(t,e,n,r){var o=Aa.splitCellIntoRows(t,e.row(),e.column(),n,r.getOrInit);return nf(o,e.row(),e.column())},yf=function(t,e,n,r){var o=of(e),i=Aa.deleteColumnsAt(t,o[0].column(),o[o.length-1].column()),u=tf(i,e[0].row(),e[0].column());return Zl(i,u)},xf=function(t,e,n,r){var o=rf(e),i=Aa.deleteRowsAt(t,o[0].row(),o[o.length-1].row()),u=tf(i,e[0].row(),e[0].column());return Zl(i,u)},Cf=function(t,e,n,r){var o=e.cells();$l.merge(o);var i=ha.merge(t,e.bounds(),n,w(o[0]));return Zl(i,E.from(o[0]))},Rf=function(t,e,n,r){var o=Y(e,function(t,e){return ha.unmerge(t,e,n,r.combine(e))},t);return Zl(o,E.from(e[0]))},Sf=function(t,e,n,r){var o=function(t,e){var n=lr.fromTable(t),r=pr.generate(n);return zc.toGrid(r,e,!0)}(e.clipboard(),e.generators()),i=yn(e.row(),e.column());return ya.merge(i,t,o,e.generators(),n).fold(function(){return Zl(t,E.some(e.element()))},function(t){var n=tf(t,e.row(),e.column());return Zl(t,n)})},Tf=function(t,e,n){var r=lr.fromPastedRows(t,n),o=pr.generate(r);return zc.toGrid(o,e,!0)},Df=function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[0].row(),u=Tf(e.clipboard(),e.generators(),o),c=ya.insert(i,t,u,e.generators(),n),a=tf(c,e.cells[0].row(),e.cells[0].column());return Zl(c,a)},Af=function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),u=Tf(e.clipboard(),e.generators(),o),c=ya.insert(i,t,u,e.generators(),n),a=tf(c,e.cells[0].row(),e.cells[0].column());return Zl(c,a)},Of=bl.adjustWidthTo,Ef={insertRowBefore:Yc(uf,Xc,v,v,El.modification),insertRowsBefore:Yc(cf,Zc,v,v,El.modification),insertRowAfter:Yc(af,Xc,v,v,El.modification),insertRowsAfter:Yc(lf,Zc,v,v,El.modification),insertColumnBefore:Yc(ff,Xc,Of,v,El.modification),insertColumnsBefore:Yc(sf,Zc,Of,v,El.modification),insertColumnAfter:Yc(df,Xc,Of,v,El.modification),insertColumnsAfter:Yc(mf,Zc,Of,v,El.modification),splitCellIntoColumns:Yc(bf,Xc,Of,v,El.modification),splitCellIntoRows:Yc(wf,Xc,v,v,El.modification),eraseColumns:Yc(yf,Zc,Of,Ql,El.modification),eraseRows:Yc(xf,Zc,v,Ql,El.modification),makeColumnHeader:Yc(hf,Xc,v,v,El.transform("row","th")),unmakeColumnHeader:Yc(vf,Xc,v,v,El.transform(null,"td")),makeRowHeader:Yc(gf,Xc,v,v,El.transform("col","th")),unmakeRowHeader:Yc(pf,Xc,v,v,El.transform(null,"td")),mergeCells:Yc(Cf,$c,v,v,El.merging),unmergeCells:Yc(Rf,Qc,Of,v,El.merging),pasteCells:Yc(Sf,Jc,Of,v,El.modification),pasteRowsBefore:Yc(Df,Kc,v,v,El.modification),pasteRowsAfter:Yc(Af,Kc,v,v,El.modification)},kf=function(t){return Xt.fromDom(t.getBody())},Nf=function(t){return t.getBoundingClientRect().width},Bf=function(t){return t.getBoundingClientRect().height},Pf=function(t){return function(e){return Ve(e,kf(t))}},If=function(t){return t?t.replace(/px$/,""):""},Wf=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},Mf=function(t){var e=Wn(t,"td[data-mce-style],th[data-mce-style]");Wt(t,"data-mce-style"),q(e,function(t){Wt(t,"data-mce-style")})},_f=function(t){return"rtl"===ne(t,"direction")?"rtl":"ltr"},Lf={isRtl:w(!1)},Ff={isRtl:w(!0)},jf=function(t){return"rtl"===_f(t)?Ff:Lf},Hf={directionAt:jf},zf=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Uf={"border-collapse":"collapse",width:"100%"},qf={border:"1"},Gf=function(t){return t.getParam("table_default_attributes",qf,"object")},Vf=function(t){return t.getParam("table_default_styles",Uf,"object")},Yf=function(t){return t.getParam("table_resize_bars",!0,"boolean")},Xf=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},Jf=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Kf=function(t){return t.getParam("table_row_advtab",!0,"boolean")},$f=function(t){return t.getParam("table_advtab",!0,"boolean")},Qf=function(t){return t.getParam("table_appearance_options",!0,"boolean")},Zf=function(t){return t.getParam("table_grid",!0,"boolean")},ts=function(t){return t.getParam("table_style_by_css",!1,"boolean")},es=function(t){return t.getParam("table_cell_class_list",[],"array")},ns=function(t){return t.getParam("table_row_class_list",[],"array")},rs=function(t){return t.getParam("table_class_list",[],"array")},os=function(t){return t.getParam("color_picker_callback")},is=function(t){return!1===t.getParam("table_responsive_width")},us=function(t){var e=t.getParam("table_clone_elements");return B(e)?E.some(e.split(/[ ,]/)):Array.isArray(e)?E.some(e):E.none()},cs=function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e},as=function(t){var e=t.getParam("table_toolbar",zf);return""===e||!1===e?[]:B(e)?e.split(/[ ,]/):P(e)?e:[]},ls=function(t,e){return t.fire("newrow",{node:e})},fs=function(t,e){return t.fire("newcell",{node:e})},ss=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},ds=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},ms=function(t,e){var n=function(t){return"table"===St(kf(t))},r=function(e){var r=Iu.getGridSize(e);return!1===n(t)||r.rows()>1},o=function(e){var r=Iu.getGridSize(e);return!1===n(t)||r.columns()>1},u=us(t),c=function(e,n,r,o){return function(c,a){Mf(c);var l=o(),f=Xt.fromDom(t.getDoc()),s=i(Hf.directionAt),d=Yr.cellOperations(r,f,u);return n(c)?e(l,c,a,d,s).bind(function(e){return q(e.newRows(),function(e){ls(t,e.dom())}),q(e.newCells(),function(e){fs(t,e.dom())}),e.cursor().map(function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n})}):E.none()}};return{deleteRow:c(Ef.eraseRows,r,v,e),deleteColumn:c(Ef.eraseColumns,o,v,e),insertRowsBefore:c(Ef.insertRowsBefore,S,v,e),insertRowsAfter:c(Ef.insertRowsAfter,S,v,e),insertColumnsBefore:c(Ef.insertColumnsBefore,S,fu.halve,e),insertColumnsAfter:c(Ef.insertColumnsAfter,S,fu.halve,e),mergeCells:c(Ef.mergeCells,S,v,e),unmergeCells:c(Ef.unmergeCells,S,v,e),pasteRowsBefore:c(Ef.pasteRowsBefore,S,v,e),pasteRowsAfter:c(Ef.pasteRowsAfter,S,v,e),pasteCells:c(Ef.pasteCells,S,v,e)}},gs=function(t,e,n){var r=lr.fromTable(t),o=pr.generate(r);return Zc(o,e).map(function(t){var e=zc.toGrid(o,n,!1),r=e.slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),i=Gc(r,n);return Hu.copy(i)})},hs={copyRows:gs},ps=tinymce.util.Tools.resolve("tinymce.util.Tools"),vs=function(t,e,n){var r,o=t.select("td,th",e);return r=function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if(void 0===e&&(e=i),e!==i)return""}return e}(r,o)},bs=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},ws=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},ys=function(t,e){ps.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},xs=function(t,e){ps.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},Cs={applyAlign:bs,applyVAlign:ws,unApplyAlign:ys,unApplyVAlign:xs,getTDTHOverallStyle:vs},Rs=function(t,e,n){var r=function(t,n){return n=n||[],ps.each(t,function(t){var o={text:t.text||t.title};t.menu?o.menu=r(t.menu):(o.value=t.value,e&&e(o)),n.push(o)}),n};return r(t,n||[])},Ss=function(t,e){u(e)?Ds(t,e):Ts(t,e)},Ts=function(t,e){var n=t.dom,r=e.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?Wf(o.width):"",i.height=o.height?Wf(o.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},Ds=function(t,e){var n=t.dom,r=e.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);r.find("#borderStyle").value(i["border-style"]||""),r.find("#borderColor").value(i["border-color"]||""),r.find("#backgroundColor").value(i["background-color"]||""),r.find("#width").value(i.width||""),r.find("#height").value(i.height||"")},As=function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r},Os=function(t){var n=function(){var e=os(t);if(e)return function(n){return e.call(t,function(t){n.control.value(t).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:e(Ts,t)},items:[{label:"Style",name:"style",type:"textbox",onchange:e(Ds,t)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:e(Ts,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:n()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:n()}]}]}},Es={createStyleForm:Os,buildListItems:Rs,updateStyleField:Ts,extractAdvancedStyles:As,updateAdvancedFields:Ds,syncAdvancedStyleFields:Ss},ks=function(t,e){delete t.dataset.mceStyle,t.style.cssText+=";"+e},Ns=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),type:e.nodeName.toLowerCase(),style:"",align:"",valign:""};return ps.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),ps.each("top middle bottom".split(" "),function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)}),Jf(t)&&ps.extend(r,Es.extractAdvancedStyles(n,e)),r},Bs=function(t,e,n){function r(t,n,r){(1===e.length||r)&&u.setAttrib(t,n,r)}function o(t,n,r){(1===e.length||r)&&u.setStyle(t,n,r)}var i,u=t.dom;Jf(t)&&Es.syncAdvancedStyleFields(t,n),i=n.control.rootControl.toJSON(),t.undoManager.transact(function(){ps.each(e,function(n){r(n,"scope",i.scope),1===e.length?r(n,"style",i.style):ks(n,i.style),r(n,"class",i.class),o(n,"width",Wf(i.width)),o(n,"height",Wf(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=u.rename(n,i.type)),1===e.length&&(Cs.unApplyAlign(t,n),Cs.unApplyVAlign(t,n)),i.align&&Cs.applyAlign(t,n,i.align),i.valign&&Cs.applyVAlign(t,n,i.valign)}),t.focus()})},Ps=function(t){var n,r,o,i=[];if(i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),n=t.dom.getParent(t.selection.getStart(),"td,th"),!i.length&&n&&i.push(n),n=n||i[0]){r=i.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:n.nodeName.toLowerCase()}:Ns(t,n),es(t).length>0&&(o={name:"class",type:"listbox",label:"Class",values:Es.buildListItems(es(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})});var u={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:e(Es.updateStyleField,t)},{label:"Height",name:"height",onchange:e(Es.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},o]};Jf(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:r,body:[{title:"General",type:"form",items:u},Es.createStyleForm(t)],onsubmit:e(Bs,t,i)}):t.windowManager.open({title:"Cell properties",data:r,body:u,onsubmit:e(Bs,t,i)})}},Is={open:Ps},Ws=function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),align:"",style:"",type:e.parentNode.nodeName.toLowerCase()};return ps.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),Kf(t)&&ps.extend(r,Es.extractAdvancedStyles(n,e)),r},Ms=function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=t.select(n,r)[0];i||(i=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(e),o.hasChildNodes()||t.remove(o)},_s=function(t){var n,r,o,i,u,a,l=t.dom,f=[];n=l.getParent(t.selection.getStart(),"table"),r=l.getParent(t.selection.getStart(),"td,th"),ps.each(n.rows,function(t){ps.each(t.cells,function(e){if(l.getAttrib(e,"data-mce-selected")||e===r)return f.push(t),!1})}),(o=f[0])&&(u=f.length>1?{height:"",scope:"",style:"",class:"",align:"",type:o.parentNode.nodeName.toLowerCase()}:Ws(t,o),ns(t).length>0&&(i={name:"class",type:"listbox",label:"Class",values:Es.buildListItems(ns(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}),a={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},Kf(t)?t.windowManager.open({title:"Row properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},Es.createStyleForm(t)],onsubmit:e(c,t,f,u)}):t.windowManager.open({title:"Row properties",data:u,body:a,onsubmit:e(c,t,f,u)}))},Ls={open:_s},Fs=tinymce.util.Tools.resolve("tinymce.Env"),js={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Hs=function(){return Xt.fromTag("table")},zs=function(){return Xt.fromTag("tbody")},Us=function(){return Xt.fromTag("tr")},qs=function(){return Xt.fromTag("th")},Gs=function(){return Xt.fromTag("td")},Vs=function(t,e,n,r,o){void 0===o&&(o=js);var i=Hs();ee(i,o.styles),Bt(i,o.attributes);var u=zs();sn(i,u);for(var c=[],a=0;a<t;a++){for(var l=Us(),f=0;f<e;f++){var s=a<n||f<r?qs():Gs();f<r&&Nt(s,"scope","row"),a<n&&Nt(s,"scope","col"),sn(s,Xt.fromTag("br")),o.percentages&&te(s,"width",100/e+"%"),sn(l,s)}c.push(l)}return hn(u,c),i},Ys=function(t){return t.dom().innerHTML},Xs=function(t){var e=Xt.fromTag("div"),n=Xt.fromDom(t.dom().cloneNode(!0));return sn(e,n),Ys(e)},Js=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},Ks=function(t,n){zn(n,"td,th").each(e(Js,t))},$s=function(t,e){q(Wn(e,"tr"),function(e){ls(t,e.dom()),q(Wn(e,"th,td"),function(e){fs(t,e.dom())})})},Qs=function(t){return B(t)&&-1!==t.indexOf("%")},Zs=function(t,e,n){var r=Vf(t),o={styles:r,attributes:Gf(t),percentages:Qs(r.width)&&!is(t)},i=Vs(n,e,0,0,o);Nt(i,"data-mce-id","__mce");var u=Xs(i);return t.insertContent(u),zn(kf(t),'table[data-mce-id="__mce"]').map(function(e){return is(t)&&te(e,"width",ne(e,"width")),Wt(e,"data-mce-id"),$s(t,e),Ks(t,e),e.dom()}).getOr(null)},td={insert:Zs},ed=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||Cs.getTDTHOverallStyle(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||Cs.getTDTHOverallStyle(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return ps.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),$f(t)&&ps.extend(r,Es.extractAdvancedStyles(n,e)),r},nd=function(t,e,n){var r=t.dom,o={},i={};if(o.class=n.class,i.height=Wf(n.height),r.getAttrib(e,"width")&&!ts(t)?o.width=If(n.width):i.width=Wf(n.width),ts(t)?(i["border-width"]=Wf(n.border),i["border-spacing"]=Wf(n.cellspacing),ps.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):ps.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),ts(t)&&e.children)for(var u=0;u<e.children.length;u++)a(r,e.children[u],{"border-width":Wf(n.border),"border-color":n.borderColor,padding:Wf(n.cellpadding)});n.style?ps.extend(i,r.parseStyle(n.style)):i=ps.extend({},r.parseStyle(r.getAttrib(e,"style")),i),o.style=r.serializeStyle(i),r.setAttribs(e,o)},rd=function(t,e,n){var r,o,i=t.dom;$f(t)&&Es.syncAdvancedStyleFields(t,n),o=n.control.rootControl.toJSON(),!1===o.class&&delete o.class,t.undoManager.transact(function(){e||(e=td.insert(t,o.cols||1,o.rows||1)),nd(t,e,o),r=i.select("caption",e)[0],r&&!o.caption&&i.remove(r),!r&&o.caption&&(r=i.create("caption"),r.innerHTML=Fs.ie?" ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),Cs.unApplyAlign(t,e),o.align&&Cs.applyAlign(t,e,o.align),t.focus(),t.addVisual()})},od=function(t,n){var r,o,i,u,c,a=t.dom,l={};!0===n?(r=a.getParent(t.selection.getStart(),"table"))&&(l=ed(t,r)):(o={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),rs(t).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),u={name:"class",type:"listbox",label:"Class",values:Es.buildListItems(rs(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),c={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:Qf(t)?[o,i,{label:"Width",name:"width",onchange:e(Es.updateStyleField,t)},{label:"Height",name:"height",onchange:e(Es.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[o,i,{label:"Width",name:"width",onchange:e(Es.updateStyleField,t)},{label:"Height",name:"height",onchange:e(Es.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},u]},$f(t)?t.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:c},Es.createStyleForm(t)],onsubmit:e(rd,t,r)}):t.windowManager.open({title:"Table properties",data:l,body:c,onsubmit:e(rd,t,r)})},id={open:od},ud=ps.each,cd=function(t,n,r,o,i){var u=Pf(t),c=function(){f().orThunk(l).each(function(e){ur.table(e,u).filter(x(u)).each(function(e){var n=Xt.fromText("");ln(e,n),vn(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)})})},a=function(e){return function(){return E.from(t.dom.getParent(t.selection.getStart(),e)).map(Xt.fromDom)}},l=a("caption"),f=a("th,td"),s=function(t){return ur.table(t,u)},d=function(t){return{width:Nf(t.dom()),height:Nf(t.dom())}},m=function(t,e,n){var r=d(n);e.width===r.width&&e.height===r.height||(ss(t,n.dom(),e.width,e.height),ds(t,n.dom(),r.width,r.height))},g=function(e){f().each(function(n){s(n).each(function(i){var u=yi.forMenu(o,i,n),c=d(i);e(i,u).each(function(e){m(t,c,i),t.selection.setRng(e),t.focus(),r.clear(i),Mf(i)})})})},h=function(e){return f().bind(function(e){return s(e).bind(function(n){var r=Xt.fromDom(t.getDoc()),i=yi.forMenu(o,n,e),u=Yr.cellOperations(v,r,E.none());return hs.copyRows(n,i,u)})})},p=function(e){i.get().each(function(n){var i=U(n,function(t){return _r(t)});f().each(function(n){s(n).each(function(u){var c=Xt.fromDom(t.getDoc()),a=Yr.paste(c),l=yi.pasteRows(o,u,n,i,a);e(u,l).each(function(e){t.selection.setRng(e),t.focus(),r.clear(u)})})})})};ud({mceTableSplitCells:function(){g(n.unmergeCells)},mceTableMergeCells:function(){g(n.mergeCells)},mceTableInsertRowBefore:function(){g(n.insertRowsBefore)},mceTableInsertRowAfter:function(){g(n.insertRowsAfter)},mceTableInsertColBefore:function(){g(n.insertColumnsBefore)},mceTableInsertColAfter:function(){g(n.insertColumnsAfter)},mceTableDeleteCol:function(){g(n.deleteColumn)},mceTableDeleteRow:function(){g(n.deleteRow)},mceTableCutRow:function(t){i.set(h()),g(n.deleteRow)},mceTableCopyRow:function(t){i.set(h())},mceTablePasteRowBefore:function(t){p(n.pasteRowsBefore)},mceTablePasteRowAfter:function(t){p(n.pasteRowsAfter)},mceTableDelete:c},function(e,n){t.addCommand(n,e)}),ud({mceInsertTable:e(id.open,t),mceTableProps:e(id.open,t,!0),mceTableRowProps:e(Ls.open,t),mceTableCellProps:e(Is.open,t)},function(e,n){t.addCommand(n,function(t,n){e(n)})})},ad={registerCommands:cd},ld=function(t){var e=E.from(t.dom().documentElement).map(Xt.fromDom).getOr(t);return{parent:w(e),view:w(t),origin:w(du(0,0))}},fd=function(t,e){var n=function(){return hu(e)};return{parent:w(e),view:w(t),origin:n}},sd=function(t,e){return{parent:w(e),view:w(t),origin:w(du(0,0))}},dd={only:ld,detached:fd,body:sd},md=function(t){var e=ut.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");n.push(t)},unbind:function(t){n=V(n,function(e){return e!==t})},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.apply(null,t);q(n,function(t){t(o)})}}},gd=function(t){return{registry:ot(t,function(t){return{bind:t.bind,unbind:t.unbind}}),trigger:ot(t,function(t){return t.trigger})}},hd={create:gd},pd=function(t,e,n,r,o,i,u){return{target:w(t),x:w(e),y:w(n),stop:r,prevent:o,kill:i,raw:w(u)}},vd=function(t,e){return function(n){if(t(n)){var r=Xt.fromDom(n.target),o=function(){n.stopPropagation()},i=function(){n.preventDefault()},u=b(i,o),c=pd(r,n.clientX,n.clientY,o,i,u,n);e(c)}}},bd=function(t,n,r,o,i){var u=vd(r,o);return t.dom().addEventListener(n,u,i),{unbind:e(yd,t,n,u,i)}},wd=function(t,e,n,r){return bd(t,e,n,r,!1)},yd=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},xd=w(!0),Cd=function(t,e,n){return wd(t,e,xd,n)},Rd=Object.prototype.hasOwnProperty,Sd=function(t,e){return e},Td=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var u in i)Rd.call(i,u)&&(r[u]=t(r[u],i[u]))}return r}}(Sd),Dd=uc("ephox-dragster"),Ad={resolve:Dd.resolve},Od=function(t){var e=Td({layerClass:Ad.resolve("blocker")},t),n=Xt.fromTag("div");return Nt(n,"role","presentation"),ee(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ju(n,Ad.resolve("blocker")),Ju(n,e.layerClass),{element:function(){return n},destroy:function(){vn(n)}}},Ed=Rl(["compare","extract","mutate","sink"]),kd=Rl(["element","start","stop","destroy"]),Nd=Rl(["forceDrop","drop","move","delayDrop"]),Bd=function(t,e){return du(e.left()-t.left(),e.top()-t.top())},Pd=function(t){return E.some(du(t.x(),t.y()))},Id=function(t,e){t.mutate(e.left(),e.top())},Wd=function(t,e){var n=Od(e),r=Cd(n.element(),"mousedown",t.forceDrop),o=Cd(n.element(),"mouseup",t.drop),i=Cd(n.element(),"mousemove",t.move),u=Cd(n.element(),"mouseout",t.delayDrop),c=function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()},a=function(t){sn(t,n.element())},l=function(){vn(n.element())};return kd({element:n.element,start:a,stop:l,destroy:c})},Md=Ed({compare:Bd,extract:Pd,sink:Wd,mutate:Id}),_d=function(e,n){var r=null;return{cancel:function(){null!==r&&(t.clearTimeout(r),r=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==r&&t.clearTimeout(r),r=t.setTimeout(function(){e.apply(null,o),r=null},n)}}},Ld=function(t,e,n){var r=!1,o=hd.create({start:md([]),stop:md([])}),i=s(),u=function(){g.stop(),i.isOn()&&(i.off(),o.trigger.stop())},c=_d(u,200),a=function(t){g.start(t),i.on(),o.trigger.start()},l=function(t){c.cancel(),i.onEvent(t,e)};i.events.move.bind(function(n){e.mutate(t,n.info())});var f=function(){r=!0},d=function(){r=!1},m=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r&&t.apply(null,e)}},g=e.sink(Nd({forceDrop:u,drop:m(u),move:m(l),delayDrop:m(c.throttle)}),n),h=function(){g.destroy()};return{element:g.element,go:a,on:f,off:d,destroy:h,events:o.registry}},Fd={setup:Ld},jd=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:Md;return Fd.setup(t,n,e)},Hd={transform:jd},zd=function(){var t=hd.create({drag:md(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}},Ud=function(){var t=hd.create({drag:md(["xDelta","yDelta","target"])}),e=E.none(),n=zd();return n.events.drag.bind(function(n){e.each(function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)})}),{assign:function(t){e=E.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}},qd=function(t){return"true"===Pt(t,"contenteditable")},Gd=function(t,e){return Un(t,"[contenteditable]",e)},Vd=ac.resolve("resizer-bar-dragging"),Yd=function(t,n,r){var o=Ud(),i=Hd.transform(o,{}),u=E.none(),c=function(t,e){return E.from(Pt(t,e))};o.events.drag.bind(function(t){c(t.target(),"data-row").each(function(e){var n=Ua.getInt(t.target(),"top");te(t.target(),"top",n+t.yDelta()+"px")}),c(t.target(),"data-column").each(function(e){var n=Ua.getInt(t.target(),"left");te(t.target(),"left",n+t.xDelta()+"px")})});var a=function(t,e){return Ua.getInt(t,e)-parseInt(Pt(t,"data-initial-"+e),10)};i.events.stop.bind(function(){o.get().each(function(e){u.each(function(o){c(e,"data-row").each(function(t){var n=a(e,"top");Wt(e,"data-initial-top"),p.trigger.adjustHeight(o,n,parseInt(t,10))}),c(e,"data-column").each(function(t){var n=a(e,"left");Wt(e,"data-initial-left"),p.trigger.adjustWidth(o,n,parseInt(t,10))}),Dc.refresh(t,o,r,n)})})});var l=function(e,n){p.trigger.startAdjust(),o.assign(e),Nt(e,"data-initial-"+n,parseInt(ne(e,n),10)),Ju(e,Vd),te(e,"opacity","0.2"),i.go(t.parent())},f=Cd(t.parent(),"mousedown",function(t){Dc.isRowBar(t.target())&&l(t.target(),"top"),Dc.isColBar(t.target())&&l(t.target(),"left")}),s=function(e){return Ve(e,t.view())},d=function(t){return Un(t,"table",s).filter(function(t){return Gd(t,s).exists(qd)})},m=Cd(t.view(),"mouseover",function(e){d(e.target()).fold(function(){Jt(e.target())&&Dc.destroy(t)},function(e){u=E.some(e),Dc.refresh(t,e,r,n)})}),g=function(){f.unbind(),m.unbind(),i.destroy(),Dc.destroy(t)},h=function(e){Dc.refresh(t,e,r,n)},p=hd.create({adjustHeight:md(["table","delta","row"]),adjustWidth:md(["table","delta","column"]),startAdjust:md([])});return{destroy:g,refresh:h,on:i.on,off:i.off,hideBars:e(Dc.hide,t),showBars:e(Dc.show,t),events:p.registry}},Xd=function(t,e){var n=Nu.height,r=Yd(t,e,n),o=hd.create({beforeResize:md(["table"]),afterResize:md(["table"]),startDrag:md([])});return r.events.adjustHeight.bind(function(t){o.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());bl.adjustHeight(t.table(),e,t.row(),n),o.trigger.afterResize(t.table())}),r.events.startAdjust.bind(function(t){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(t){o.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());bl.adjustWidth(t.table(),n,t.column(),e),o.trigger.afterResize(t.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}},Jd={create:Xd},Kd=function(){var t=Xt.fromTag("div");return ee(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),sn(Kt(),t),t},$d=function(t,e){return t.inline?dd.body(kf(t),Kd()):dd.only(Xt.fromDom(t.getDoc()))},Qd=function(t,e){t.inline&&vn(e.parent())},Zd={get:$d,remove:Qd},tm=function(t){var e,n,r=E.none(),o=E.none(),u=E.none(),c=/(\d+(\.\d+)?)%/,a=function(t){return"TABLE"===t.nodeName},l=function(e){return t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width")},f=function(){return o},s=function(){return u.getOr(dd.only(Xt.fromDom(t.getBody())))},d=function(){o.each(function(t){t.destroy()}),u.each(function(e){Zd.remove(t,e)})};return t.on("init",function(){var e=i(Hf.directionAt),n=Zd.get(t);if(u=E.some(n),cs(t)&&Yf(t)){var c=Jd.create(n,e);c.on(),c.events.startDrag.bind(function(e){r=E.some(t.selection.getRng())}),c.events.beforeResize.bind(function(e){var n=e.table().dom();ss(t,n,Nf(n),Bf(n))}),c.events.afterResize.bind(function(e){var n=e.table(),o=n.dom();Mf(n),r.each(function(e){t.selection.setRng(e),t.focus()}),ds(t,o,Nf(o),Bf(o)),t.undoManager.add()}),o=E.some(c)}}),t.on("ObjectResizeStart",function(t){var r=t.target;a(r)&&(e=t.width,n=l(r))}),t.on("ObjectResized",function(r){var o=r.target;if(a(o)){var i=o;if(c.test(n)){var u=parseFloat(c.exec(n)[1]),l=r.width*u/e;t.dom.setStyle(i,"width",l+"%")}else{var f=[];ps.each(i.rows,function(e){ps.each(e.cells,function(e){var n=t.dom.getStyle(e,"width",!0);f.push({cell:e,width:n})})}),ps.each(f,function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:f,lazyWire:s,destroy:d}},em=ci.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),nm=function(t){return void 0===t&&(t=void 0),em.none(t)},rm=Wu(Wu({},em),{none:nm}),om=function(t,e){return ur.table(t,e).bind(function(e){var n=ur.cells(e);return K(n,function(e){return Ve(t,e)}).map(function(t){return{index:w(t),all:w(n)}})})},im=function(t,e){return om(t,e).fold(function(){return rm.none(t)},function(e){return e.index()+1<e.all().length?rm.middle(t,e.all()[e.index()+1]):rm.last(t)})},um=function(t,e){return om(t,e).fold(function(){return rm.none()},function(e){return e.index()-1>=0?rm.middle(t,e.all()[e.index()-1]):rm.first(t)})},cm={next:im,prev:um},am=ut("start","soffset","finish","foffset"),lm={create:am},fm=ci.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sm=function(t,e,n,r){return t.fold(e,n,r)},dm=function(t){return t.fold(y,y,y)},mm=fm.before,gm=fm.on,hm=fm.after,pm={before:mm,on:gm,after:hm,cata:sm,getStart:dm},vm=ci.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bm=function(t){return vm.exact(t.start(),t.soffset(),t.finish(),t.foffset())},wm=function(t){return t.match({domRange:function(t){return Xt.fromDom(t.startContainer)},relative:function(t,e){return pm.getStart(t)},exact:function(t,e,n,r){return t}})},ym=vm.domRange,xm=vm.relative,Cm=vm.exact,Rm=function(t){var e=wm(t);return Ze(e)},Sm=lm.create,Tm={domRange:ym,relative:xm,exact:Cm,exactFromRange:bm,getWin:Rm,range:Sm},Dm=function(t,e){var n=t.document.createRange();return Am(n,e),n},Am=function(t,e){t.selectNodeContents(e.dom())},Om=function(t,e){e.fold(function(e){t.setStartBefore(e.dom())},function(e,n){t.setStart(e.dom(),n)},function(e){t.setStartAfter(e.dom())})},Em=function(t,e){e.fold(function(e){t.setEndBefore(e.dom())},function(e,n){t.setEnd(e.dom(),n)},function(e){t.setEndAfter(e.dom())})},km=function(t,e,n){var r=t.document.createRange();return Om(r,e),Em(r,n),r},Nm=function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},Bm=function(t){return{left:w(t.left),top:w(t.top),right:w(t.right),bottom:w(t.bottom),width:w(t.width),height:w(t.height)}},Pm=function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?E.some(n).map(Bm):E.none()},Im=ci.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Wm=function(t,e,n){return e(Xt.fromDom(n.startContainer),n.startOffset,Xt.fromDom(n.endContainer),n.endOffset)},Mm=function(t,e){return e.match({domRange:function(t){return{ltr:w(t),rtl:E.none}},relative:function(e,n){return{ltr:zt(function(){return km(t,e,n)}),rtl:zt(function(){return E.some(km(t,n,e))})}},exact:function(e,n,r,o){return{ltr:zt(function(){return Nm(t,e,n,r,o)}),rtl:zt(function(){return E.some(Nm(t,r,o,e,n))})}}})},_m=function(t,e){var n=e.ltr();if(n.collapsed){return e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return Im.rtl(Xt.fromDom(t.endContainer),t.endOffset,Xt.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return Wm(0,Im.ltr,n)})}return Wm(0,Im.ltr,n)},Lm=function(t,e){var n=Mm(t,e);return _m(0,n)},Fm=function(t,e){return Lm(t,e).match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),n),i}})},jm=function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,u=1;u<o;u++){var c=t(u),a=Math.abs(e-c.left);if(n<=c.bottom){if(n<c.top||a>i)return u-1;i=a}}return 0},Hm=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},zm=function(t,e,n,r,o){var i=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},u=function(t){return i(t).getBoundingClientRect()},c=Tr(e).length,a=jm(u,n,r,o.right,c);return i(a)},Um=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getClientRects();return _u(i,function(t){return Hm(t,n,r)?E.some(t):E.none()}).map(function(o){return zm(t,e,n,r,o)})},qm=function(t,e,n,r){var o=t.dom().createRange(),i=on(e);return _u(i,function(e){return o.selectNode(e.dom()),Hm(o.getBoundingClientRect(),n,r)?Gm(t,e,n,r):E.none()})},Gm=function(t,e,n,r){return Et(e)?Um(t,e,n,r):qm(t,e,n,r)},Vm=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return Gm(t,e,u,c)},Ym=function(t,e){return e-t.left<t.right-e},Xm=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},Jm=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var o=r.getBoundingClientRect(),i=Ym(o,n);return(!0===i?Br:Pr)(e).map(function(e){return Xm(t,e,i)})},Km=function(t,e,n){var r=e.dom().getBoundingClientRect(),o=Ym(r,n);return E.some(Xm(t,e,o))},$m=function(t,e,n){return(0===on(e).length?Km:Jm)(t,e,n)},Qm=function(t,e,n){return E.from(t.dom().caretPositionFromPoint(e,n)).bind(function(e){if(null===e.offsetNode)return E.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),E.some(n)})},Zm=function(t,e,n){return E.from(t.dom().caretRangeFromPoint(e,n))},tg=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return Vm(t,e,u,c)},eg=function(t,e,n){return Xt.fromPoint(t,e,n).bind(function(r){var o=function(){return $m(t,r,e)};return 0===on(r).length?o():tg(t,r,e,n).orThunk(o)})},ng=document.caretPositionFromPoint?Qm:document.caretRangeFromPoint?Zm:eg,rg=function(t,e,n){var r=Xt.fromDom(t.document);return ng(r,e,n).map(function(t){return lm.create(Xt.fromDom(t.startContainer),t.startOffset,Xt.fromDom(t.endContainer),t.endOffset)})},og=function(t,e){var n=St(t);return"input"===n?pm.after(t):H(["br","img"],n)?0===e?pm.before(t):pm.after(t):pm.on(t,e)},ig=function(t,e){var n=t.fold(pm.before,og,pm.after),r=e.fold(pm.before,og,pm.after);return Tm.relative(n,r)},ug=function(t,e,n,r){var o=og(t,e),i=og(n,r);return Tm.relative(o,i)},cg=function(t){return t.match({domRange:function(t){var e=Xt.fromDom(t.startContainer),n=Xt.fromDom(t.endContainer);return ug(e,t.startOffset,n,t.endOffset)},relative:ig,exact:ug})},ag=function(t,e,n,r){var o=Qe(t),i=o.dom().createRange();return i.setStart(t.dom(),e),i.setEnd(n.dom(),r),i},lg=function(t,e,n,r){var o=ag(t,e,n,r),i=Ve(t,n)&&e===r;return o.collapsed&&!i},fg=function(t,e){E.from(t.getSelection()).each(function(t){t.removeAllRanges(),t.addRange(e)})},sg=function(t,e,n,r,o){var i=Nm(t,e,n,r,o);fg(t,i)},dg=function(t,e,n,r,o,i){e.collapse(n.dom(),r),e.extend(o.dom(),i)},mg=function(t,e){return Lm(t,e).match({ltr:function(e,n,r,o){sg(t,e,n,r,o)},rtl:function(e,n,r,o){var i=t.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom(),n,r.dom(),o);else if(i.extend)try{dg(0,i,e,n,r,o)}catch(i){sg(t,r,o,e,n)}else sg(t,r,o,e,n)}})},gg=function(t,e,n,r,o){var i=ug(e,n,r,o);mg(t,i)},hg=function(t,e,n){var r=ig(e,n);mg(t,r)},pg=function(t){var e=Tm.getWin(t).dom(),n=function(t,n,r,o){return Nm(e,t,n,r,o)},r=cg(t);return Lm(e,r).match({ltr:n,rtl:n})},vg=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return E.some(lm.create(Xt.fromDom(e.startContainer),e.startOffset,Xt.fromDom(n.endContainer),n.endOffset))}return E.none()},bg=function(t){var e=Xt.fromDom(t.anchorNode),n=Xt.fromDom(t.focusNode);return lg(e,t.anchorOffset,n,t.focusOffset)?E.some(lm.create(e,t.anchorOffset,n,t.focusOffset)):vg(t)},wg=function(t,e){var n=Dm(t,e);fg(t,n)},yg=function(t){return E.from(t.getSelection()).filter(function(t){return t.rangeCount>0}).bind(bg)},xg=function(t){return yg(t).map(function(t){return Tm.exact(t.start(),t.soffset(),t.finish(),t.foffset())})},Cg=function(t,e){var n=Fm(t,e);return Pm(n)},Rg=function(t,e,n){return rg(t,e,n)},Sg=function(t){t.getSelection().removeAllRanges()},Tg=tinymce.util.Tools.resolve("tinymce.util.VK"),Dg=function(t,e,n,r){return kg(t,e,cm.next(n),r)},Ag=function(t,e,n,r){return kg(t,e,cm.prev(n),r)},Og=function(t,e){var n=Tm.exact(e,0,e,0);return pg(n)},Eg=function(t,e){var n=Wn(e,"tr");return et(n).bind(function(t){return zn(t,"td,th").map(function(t){return Og(0,t)})})},kg=function(t,e,n,r,o){return n.fold(E.none,E.none,function(t,e){return Br(e).map(function(t){return Og(0,t)})},function(n){return ur.table(n,e).bind(function(e){var o=yi.noMenu(n);return t.undoManager.transact(function(){r.insertRowsAfter(e,o)}),Eg(0,e)})})},Ng=["table","li","dl"],Bg=function(t,e,n,r){if(t.keyCode===Tg.TAB){var o=kf(e),i=function(t){var e=St(t);return Ve(t,o)||H(Ng,e)},u=e.selection.getRng();if(u.collapsed){var c=Xt.fromDom(u.startContainer);ur.cell(c,i).each(function(o){t.preventDefault(),(t.shiftKey?Ag:Dg)(e,i,o,n,r).each(function(t){e.selection.setRng(t)})})}}},Pg={handle:Bg},Ig=ut("selection","kill"),Wg={create:Ig},Mg=function(t,e,n,r){return{start:w(pm.on(t,e)),finish:w(pm.on(n,r))}},_g={create:Mg},Lg=function(t,e){var n=Fm(t,e);return lm.create(Xt.fromDom(n.startContainer),n.startOffset,Xt.fromDom(n.endContainer),n.endOffset)},Fg=_g.create,jg={convertToRange:Lg,makeSitus:Fg},Hg=function(t,e,n,r,o,i,u){return Ve(n,o)&&r===i?E.none():Un(n,"td,th",e).bind(function(n){return Un(o,"td,th",e).bind(function(r){return zg(t,e,n,r,u)})})},zg=function(t,e,n,r,o){return Ve(n,r)?E.none():ti.identify(n,r,e).bind(function(e){var r=e.boxes().getOr([]);return r.length>0?(o(t,r,e.start(),e.finish()),E.some(Wg.create(E.some(jg.makeSitus(n,0,n,Or(n))),!0))):E.none()})},Ug=function(t,e,n,r,o){var i=function(t){return o.clear(n),o.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()};return ti.shiftSelection(r,t,e,o.firstSelectedSelector(),o.lastSelectedSelector()).map(i)},qg={sync:Hg,detect:zg,update:Ug},Gg=ut("item","mode"),Vg=function(t,e,n,r){return void 0===r&&(r=Yg),t.property().parent(e).map(function(t){return Gg(t,r)})},Yg=function(t,e,n,r){return void 0===r&&(r=Xg),n.sibling(t,e).map(function(t){return Gg(t,r)})},Xg=function(t,e,n,r){void 0===r&&(r=Xg);var o=t.property().children(e);return n.first(o).map(function(t){return Gg(t,r)})},Jg=[{current:Vg,next:Yg,fallback:E.none()},{current:Yg,next:Xg,fallback:E.some(Vg)},{current:Xg,next:Xg,fallback:E.some(Yg)}],Kg=function(t,e,n,r,o){return void 0===o&&(o=Jg),J(o,function(t){return t.current===n}).bind(function(n){return n.current(t,e,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return Kg(t,e,n,r)})})})},$g=function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?E.some(t[t.length-1]):E.none()}}},Qg=function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?E.some(t[0]):E.none()}}},Zg={left:$g,right:Qg},th=function(t,e,n,r,o,i){return Kg(t,e,r,o).bind(function(e){return i(e.item())?E.none():n(e.item())?E.some(e.item()):th(t,e.item(),n,e.mode(),o,i)})},eh=function(t,e,n,r){return th(t,e,n,Yg,Zg.left(),r)},nh=function(t,e,n,r){return th(t,e,n,Yg,Zg.right(),r)},rh=function(t){return function(e){return 0===t.property().children(e).length}},oh=function(t,e,n){return uh(t,e,rh(t),n)},ih=function(t,e,n){return ch(t,e,rh(t),n)},uh=eh,ch=nh,ah=r(),lh=function(t,e){return oh(ah,t,e)},fh=function(t,e){return ih(ah,t,e)},sh=function(t,e,n){return uh(ah,t,e,n)},dh=function(t,e,n){return ch(ah,t,e,n)},mh=function(t,e,n){return Mn(t,e,n).isSome()},gh=ut("element","offset"),hh=(ut("element","deltaOffset"),ut("element","start","finish"),ut("begin","end"),ut("element","text"),ci.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),ph=function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right},vh=function(t){return Un(t,"tr")},bh=function(t,e,n,r,o,i,u){return Un(r,"td,th",u).bind(function(n){return Un(e,"td,th",u).map(function(e){return Ve(n,e)?Ve(r,n)&&Or(n)===o?i(e):hh.none("in same cell"):qo.sharedOne(vh,[n,e]).fold(function(){return ph(t,e,n)?hh.success():i(e)},function(t){return i(e)})})}).getOr(hh.none("default"))},wh=function(t,e,n,r,o){return t.fold(e,n,r,o)},yh=Wu(Wu({},hh),{verify:bh,cata:wh}),xh=(ut("ancestor","descendants","element","index"),ut("parent","children","element","index")),Ch=function(t){return tn(t).bind(function(e){var n=on(e);return Rh(n,t).map(function(r){return xh(e,n,t,r)})})},Rh=function(t,n){return K(t,e(Ve,n))},Sh=function(t){return"br"===St(t)},Th=function(t,e,n){return e(t,n).bind(function(t){return Et(t)&&0===Tr(t).trim().length?Th(t,e,n):E.some(t)})},Dh=function(t,e,n){return n.traverse(e).orThunk(function(){return Th(e,n.gather,t)}).map(n.relative)},Ah=function(t,e){return un(t,e).filter(Sh).orThunk(function(){return un(t,e-1).filter(Sh)})},Oh=function(t,e,n,r){return Ah(e,n).bind(function(e){return r.traverse(e).fold(function(){return Th(e,r.gather,t).map(r.relative)},function(t){return Ch(t).map(function(t){return pm.on(t.parent(),t.index())})})})},Eh=function(t,e,n,r){return(Sh(e)?Dh(t,e,r):Oh(t,e,n,r)).map(function(t){return{start:w(t),finish:w(t)}})},kh=function(t){return yh.cata(t,function(t){return E.none()},function(){return E.none()},function(t){return E.some(gh(t,0))},function(t){return E.some(gh(t,Or(t)))})},Nh={tryBr:Eh,process:kh},Bh=mt(["left","top","right","bottom"],[]),Ph=function(t,e){return Bh({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},Ih=function(t,e){return Bh({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},Wh=function(t,e){var n=t.bottom()-t.top();return Bh({left:t.left(),top:e-n,right:t.right(),bottom:e})},Mh=function(t,e){var n=t.bottom()-t.top();return Bh({left:t.left(),top:e,right:t.right(),bottom:e+n})},_h=function(t,e,n){return Bh({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},Lh=function(t){return t.top()},Fh=function(t){return t.bottom()},jh=function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"},Hh={nu:Bh,moveUp:Ih,moveDown:Ph,moveBottomTo:Wh,moveTopTo:Mh,getTop:Lh,getBottom:Fh,translate:_h,toString:jh},zh=function(t,e,n){return n>=0&&n<Or(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):E.none()},Uh=function(t){return Hh.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},qh=function(t,e){return E.some(t.getRect(e))},Gh=function(t,e,n){return Ot(e)?qh(t,e).map(Uh):Et(e)?zh(t,e,n).map(Uh):E.none()},Vh=function(t,e){return Ot(e)?qh(t,e).map(Uh):Et(e)?t.getRangedRect(e,0,e,Or(e)).map(Uh):E.none()},Yh={getBoxAt:Gh,getEntireBox:Vh},Xh=ci.generate([{none:[]},{retry:["caret"]}]),Jh=function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()},Kh=function(t,e,n){return _n(e,Jl.isBlock).fold(w(!1),function(e){return Yh.getEntireBox(t,e).exists(function(t){return Jh(n,t)})})},$h=function(t,e,n,r,o){var i=Hh.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1?Xh.retry(i):n.top()>o.bottom()?Xh.retry(i):n.top()===o.bottom()?Xh.retry(Hh.moveDown(o,1)):Kh(t,e,o)?Xh.retry(Hh.translate(i,5,0)):Xh.none()},Qh=function(t,e,n,r,o){var i=Hh.moveUp(o,5);return Math.abs(n.top()-r.top())<1?Xh.retry(i):n.bottom()<o.top()?Xh.retry(i):n.bottom()===o.top()?Xh.retry(Hh.moveUp(o,1)):Kh(t,e,o)?Xh.retry(Hh.translate(i,5,0)):Xh.none()},Zh={point:Hh.getTop,adjuster:Qh,move:Hh.moveUp,gather:lh},tp={point:Hh.getBottom,adjuster:$h,move:Hh.moveDown,gather:fh},ep=function(t,e,n){return t.elementFromPoint(e,n).filter(function(t){return"table"===St(t)}).isSome()},np=function(t,e,n,r,o){return rp(t,e,n,e.move(r,5),o)},rp=function(t,e,n,r,o){return 0===o?E.some(r):ep(t,r.left(),e.point(r))?np(t,e,n,r,o-1):t.situsFromPoint(r.left(),e.point(r)).bind(function(i){return i.start().fold(E.none,function(i){return Yh.getEntireBox(t,i).bind(function(u){return e.adjuster(t,i,u,n,r).fold(E.none,function(r){return rp(t,e,n,r,o-1)})}).orThunk(function(){return E.some(r)})},E.none)})},op=function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},ip=function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},up=function(t,e,n){return t.point(e)>n.getInnerHeight()?E.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?E.some(-t.point(e)):E.none()},cp=function(t,e,n){var r=t.move(n,5),o=rp(e,t,n,r,100).getOr(r);return up(t,o,e).fold(function(){return e.situsFromPoint(o.left(),t.point(o))},function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left(),t.point(o)-n)})},ap={tryUp:e(cp,Zh),tryDown:e(cp,tp),ieTryUp:ip,ieTryDown:op,getJumpSize:w(5)},lp=Fe.detect(),fp=function(t,e,n){return t.getSelection().bind(function(r){return Nh.tryBr(e,r.finish(),r.foffset(),n).fold(function(){return E.some(gh(r.finish(),r.foffset()))},function(o){var i=t.fromSitus(o),u=yh.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,e);return Nh.process(u)})})},sp=function(t,e,n,r,o,i){return 0===i?E.none():gp(t,e,n,r,o).bind(function(u){var c=t.fromSitus(u),a=yh.verify(t,n,r,c.finish(),c.foffset(),o.failure,e);return yh.cata(a,function(){return E.none()},function(){return E.some(u)},function(u){return Ve(n,u)&&0===r?dp(t,n,r,Hh.moveUp,o):sp(t,e,u,0,o,i-1)},function(u){return Ve(n,u)&&r===Or(u)?dp(t,n,r,Hh.moveDown,o):sp(t,e,u,Or(u),o,i-1)})})},dp=function(t,e,n,r,o){return Yh.getBoxAt(t,e,n).bind(function(e){return mp(t,o,r(e,ap.getJumpSize()))})},mp=function(t,e,n){return lp.browser.isChrome()||lp.browser.isSafari()||lp.browser.isFirefox()||lp.browser.isEdge()?e.otherRetry(t,n):lp.browser.isIE()?e.ieRetry(t,n):E.none()},gp=function(t,e,n,r,o){return Yh.getBoxAt(t,n,r).bind(function(e){return mp(t,o,e)})},hp=function(t,e,n){return fp(t,e,n).bind(function(r){return sp(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)})},pp={handle:hp},vp=Fe.detect(),bp=function(t,e){return mh(t,function(t){return tn(t).exists(function(t){return Ve(t,e)})})},wp=function(t,e,n,r,o){return Un(r,"td,th",e).bind(function(r){return Un(r,"table",e).bind(function(i){return bp(o,i)?pp.handle(t,e,n).bind(function(t){return Un(t.finish(),"td,th",e).map(function(e){return{start:w(r),finish:w(e),range:w(t)}})}):E.none()})})},yp=function(t,e,n,r,o,i){return vp.browser.isIE()?E.none():i(r,e).orThunk(function(){return wp(t,e,n,r,o).map(function(t){var e=t.range();return Wg.create(E.some(jg.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},xp=function(t,e){return Un(t,"tr",e).bind(function(t){return Un(t,"table",e).bind(function(n){var r=Wn(n,"tr");return Ve(t,r[0])?sh(n,function(t){return Pr(t).isSome()},e).map(function(t){var e=Or(t);return Wg.create(E.some(jg.makeSitus(t,e,t,e)),!0)}):E.none()})})},Cp=function(t,e){return Un(t,"tr",e).bind(function(t){return Un(t,"table",e).bind(function(n){var r=Wn(n,"tr");return Ve(t,r[r.length-1])?dh(n,function(t){return Br(t).isSome()},e).map(function(t){return Wg.create(E.some(jg.makeSitus(t,0,t,0)),!0)}):E.none()})})},Rp=function(t,e,n,r,o,i,u){return wp(t,n,r,o,i).bind(function(t){return qg.detect(e,n,t.start(),t.finish(),u)})},Sp={navigate:yp,select:Rp,firstUpCheck:xp,lastDownCheck:Cp},Tp=function(t,e){return Un(t,"td,th",e)},Dp={traverse:rn,gather:fh,relative:pm.before,otherRetry:ap.tryDown,ieRetry:ap.ieTryDown,failure:yh.failedDown},Ap={traverse:nn,gather:lh,relative:pm.before,otherRetry:ap.tryUp,ieRetry:ap.ieTryUp,failure:yh.failedUp},Op={down:Dp,up:Ap},Ep=function(t){return function(e){return e===t}},kp=Ep(38),Np=Ep(40),Bp=function(t){return t>=37&&t<=40},Pp={ltr:{isBackward:Ep(37),isForward:Ep(39)},rtl:{isBackward:Ep(39),isForward:Ep(37)},isUp:kp,isDown:Np,isNavigation:Bp},Ip=function(t){return{left:t.left(),top:t.top(),right:t.right(),bottom:t.bottom(),width:t.width(),height:t.height()}},Wp={toRaw:Ip},Mp=(Fe.detect().browser.isSafari(),function(e){var n=void 0!==e?e.dom():t.document,r=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return du(r,o)}),_p=function(e,n,r){(void 0!==r?r.dom():t.document).defaultView.scrollBy(e,n)},Lp=function(t){var e=function(e,n){return Xt.fromPoint(Xt.fromDom(t.document),e,n)},n=function(t){return t.dom().getBoundingClientRect()},r=function(e,n,r,o){var i=Tm.exact(e,n,r,o);return Cg(t,i).map(Wp.toRaw)},o=function(){return xg(t).map(function(e){return jg.convertToRange(t,e)})},i=function(e){var n=Tm.relative(e.start(),e.finish());return jg.convertToRange(t,n)},u=function(e,n){return Rg(t,e,n).map(function(t){return _g.create(t.start(),t.soffset(),t.finish(),t.foffset())})},c=function(){Sg(t)},a=function(e){wg(t,e)};return{elementFromPoint:e,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:u,clearSelection:c,setSelection:function(e){gg(t,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){hg(t,e,n)},selectContents:a,getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return Mp(Xt.fromDom(t.document)).top()},scrollBy:function(e,n){_p(e,n,Xt.fromDom(t.document))}}},Fp=ut("rows","cols"),jp=function(t,e,n,r){var o=Lp(t),i=d(o,e,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},Hp=function(t,n,r,o){var i=Lp(t),u=function(){return o.clear(n),E.none()};return{keydown:function(t,c,a,l,f,s){var d=t.raw(),m=d.which,g=!0===d.shiftKey;return ti.retrieve(n,o.selectedSelector()).fold(function(){return Pp.isDown(m)&&g?e(Sp.select,i,n,r,Op.down,l,c,o.selectRange):Pp.isUp(m)&&g?e(Sp.select,i,n,r,Op.up,l,c,o.selectRange):Pp.isDown(m)?e(Sp.navigate,i,r,Op.down,l,c,Sp.lastDownCheck):Pp.isUp(m)?e(Sp.navigate,i,r,Op.up,l,c,Sp.firstUpCheck):E.none},function(t){var e=function(e){return function(){return _u(e,function(e){return qg.update(e.rows(),e.cols(),n,t,o)}).fold(function(){return ti.getEdges(n,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(t){var e=Pp.isDown(m)||s.isForward(m)?pm.after:pm.before;return i.setRelativeSelection(pm.on(t.first(),0),e(t.table())),o.clear(n),Wg.create(E.none(),!0)})},function(t){return E.some(Wg.create(E.none(),!0))})}};return Pp.isDown(m)&&g?e([Fp(1,0)]):Pp.isUp(m)&&g?e([Fp(-1,0)]):s.isBackward(m)&&g?e([Fp(0,-1),Fp(-1,0)]):s.isForward(m)&&g?e([Fp(0,1),Fp(1,0)]):Pp.isNavigation(m)&&!1===g?u:E.none})()},keyup:function(t,e,i,u,c){return ti.retrieve(n,o.selectedSelector()).fold(function(){var a=t.raw(),l=a.which;return 0==(!0===a.shiftKey)?E.none():Pp.isNavigation(l)?qg.sync(n,r,e,i,u,c,o.selectRange):E.none()},E.none)}}},zp={mouse:jp,keyboard:Hp},Up=function(t,e){q(e,function(e){$u(t,e)})},qp=function(t){return function(e){Ju(e,t)}},Gp=function(t){return function(e){Up(e,t)}},Vp=function(t){var e=qp(t.selected()),n=Gp([t.selected(),t.lastSelected(),t.firstSelected()]),r=function(e){var r=Wn(e,t.selectedSelector());q(r,n)};return{clear:r,selectRange:function(n,o,i,u){r(n),q(o,e),Ju(i,t.firstSelected()),Ju(u,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Yp=function(t){var e=function(e){Wt(e,t.selected()),Wt(e,t.firstSelected()),Wt(e,t.lastSelected())},n=function(e){Nt(e,t.selected(),"1")},r=function(n){var r=Wn(n,t.selectedSelector());q(r,e)};return{clear:r,selectRange:function(e,o,i,u){r(e),q(o,n),Nt(i,t.firstSelected(),"1"),Nt(u,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Xp={byClass:Vp,byAttr:Yp},Jp=function(t){return!1===Qu(Xt.fromDom(t.target),"ephox-snooker-resizer-bar")},Kp=function(t){return{get:function(){var e=kf(t);return ri.retrieve(e,ii.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?fi.none():fi.single(t.selection)},function(t){return fi.multiple(t)})}}},$p=ps.each,Qp=function(t){function e(e){return function(){t.execCommand(e)}}var n=[];$p("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"===e?n.push({text:"-"}):n.push(t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:n}),t.addButton("tableprops",{title:"Table properties",onclick:e("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:e("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:e("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:e("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:e("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:e("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:e("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:e("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:e("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:e("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:e("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:e("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:e("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:e("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:e("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:e("mceTableDeleteCol")})},Zp=function(t){var e=function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},n=as(t);n.length>0&&t.addContextToolbar(e,n.join(" "))},tv={addButtons:Qp,addToolbars:Zp},ev=function(t,e){function n(e){return function(){t.execCommand(e)}}var r=E.none(),o=[],i=[],u=[],c=[],a=function(t){t.disabled(!0)},l=function(t){t.disabled(!1)},f=function(){var t=this;o.push(t),r.fold(function(){a(t)},function(e){l(t)})},s=function(){var t=this;i.push(t),r.fold(function(){a(t)},function(e){l(t)})},d=function(){var t=this;u.push(t),r.fold(function(){a(t)},function(e){t.disabled(e.mergable().isNone())})},m=function(){var t=this;c.push(t),r.fold(function(){a(t)},function(e){t.disabled(e.unmergable().isNone())})},g=function(){r.fold(function(){q(o,a),q(i,a),q(u,a),q(c,a)},function(t){q(o,l),q(i,l),q(u,function(e){e.disabled(t.mergable().isNone())}),q(c,function(e){e.disabled(t.unmergable().isNone())})})};t.on("init",function(){t.on("nodechange",function(n){var o=E.from(t.dom.getParent(t.selection.getStart(),"th,td"));r=o.bind(function(t){var n=Xt.fromDom(t);return ur.table(n).map(function(t){return yi.forMenu(e,t,n)})}),g()})});var h=function(t,e,n,r){var o,i,u,c,a,l=r.getEl().getElementsByTagName("table")[0],f=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=e+1+" x "+(n+1),f&&(e=9-e),i=0;i<10;i++)for(o=0;o<10;o++)c=l.rows[i].childNodes[o].firstChild,a=(f?o>=e:o<=e)&&i<=n,t.dom.toggleClass(c,"mce-active",a),a&&(u=c);return u.parentNode},p=!1===Zf(t)?{text:"Table",icon:"table",context:"table",onclick:n("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),t.execCommand("mceInsertTable"))},onshow:function(){h(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,o=e.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(h(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact(function(){td.insert(t,n.lastX+1,n.lastY+1)}),t.addVisual())}}]},v={text:"Table properties",context:"table",onPostRender:f,onclick:n("mceTableProps")},b={text:"Delete table",context:"table",onPostRender:f,cmd:"mceTableDelete"},w={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:s},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:s},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:s},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:s},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:s},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:s},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:s},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:s}]},y={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:s},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:s},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:s}]},x={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:s},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:d},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:m}]};t.addMenuItem("inserttable",p),t.addMenuItem("tableprops",v),t.addMenuItem("deletetable",b),t.addMenuItem("row",w),t.addMenuItem("column",y),t.addMenuItem("cell",x)},nv={addMenuItems:ev},rv=function(t){return t.get().fold(function(){},function(t){return U(t,function(t){return t.dom()})})},ov=function(t,e){var n=U(t,Xt.fromDom);e.set(E.from(n))},iv=function(t,e){return{insertTable:function(e,n){return td.insert(t,e,n)},setClipboardRows:function(t){return ov(t,e)},getClipboardRows:function(){return rv(e)}}};p.add("table",g)}(window)}()},"Q/P+":function(t,e,n){n("BzBW")}});
//# sourceMappingURL=8.72581677443679e133ec.js.map
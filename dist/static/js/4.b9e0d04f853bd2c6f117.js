webpackJsonp([4],{UyWB:function(t,e){!function(){!function(){"use strict";function t(){}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.util.I18n"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(t){return t.getParam("toc_class","mce-toc")},i=function(t){var e=t.getParam("toc_header","h2");return/^h[1-6]$/.test(e)?e:"h2"},a=function(t){var e=parseInt(t.getParam("toc_depth","3"),10);return e>=1&&e<=9?e:3},l={getTocClass:c,getTocHeader:i,getTocDepth:a},u=function(t){var e=0;return function(){var n=(new Date).getTime().toString(32);return t+n+(e++).toString(32)}},s={create:u},d=s.create("mcetoc_"),f=function(t){var e,n=[];for(e=1;e<=t;e++)n.push("h"+e);return n.join(",")},m=function(t){return g(t).length>0},g=function(t){var e=l.getTocClass(t),n=l.getTocHeader(t),o=f(l.getTocDepth(t)),c=t.$(o);return c.length&&/^h[1-9]$/i.test(n)&&(c=c.filter(function(n,o){return!t.dom.hasClass(o.parentNode,e)})),r.map(c,function(e){return{id:e.id?e.id:d(),level:parseInt(e.nodeName.replace(/^H/i,""),10),title:t.$.text(e),element:e}})},v=function(t){var e,n=9;for(e=0;e<t.length;e++)if(t[e].level<n&&(n=t[e].level),1===n)return n;return n},T=function(t,e){var o="<"+t+' contenteditable="true">',r="</"+t+">";return o+n.DOM.encode(e)+r},h=function(t){var e=p(t);return'<div class="'+t.dom.encode(l.getTocClass(t))+'" contenteditable="false">'+e+"</div>"},p=function(t){var e,n,r,c,i="",a=g(t),u=v(a)-1;if(!a.length)return"";for(i+=T(l.getTocHeader(t),o.translate("Table of Contents")),e=0;e<a.length;e++){if(r=a[e],r.element.id=r.id,c=a[e+1]&&a[e+1].level,u===r.level)i+="<li>";else for(n=u;n<r.level;n++)i+="<ul><li>";if(i+='<a href="#'+r.id+'">'+r.title+"</a>",c!==r.level&&c)for(n=r.level;n>c;n--)i+="</li></ul><li>";else i+="</li>",c||(i+="</ul>");u=r.level}return i},C=function(t,e){return!e.length||t.dom.getParents(e[0],".mce-offscreen-selection").length>0},b=function(t){var e=l.getTocClass(t),n=t.$("."+e);C(t,n)?t.insertContent(h(t)):y(t)},y=function(t){var e=l.getTocClass(t),n=t.$("."+e);n.length&&t.undoManager.transact(function(){n.html(p(t))})},P={hasHeaders:m,insertToc:b,updateToc:y},I=function(t){t.addCommand("mceInsertToc",function(){P.insertToc(t)}),t.addCommand("mceUpdateToc",function(){P.updateToc(t)})},U={register:I},$=function(t){var e=t.$,n=l.getTocClass(t);t.on("PreProcess",function(t){var o=e("."+n,t.node);o.length&&(o.removeAttr("contentEditable"),o.find("[contenteditable]").removeAttr("contentEditable"))}),t.on("SetContent",function(){var t=e("."+n);t.length&&(t.attr("contentEditable",!1),t.children(":first-child").attr("contentEditable",!0))})},H={setup:$},B=function(t){return function(e){var n=e.control;t.on("LoadContent SetContent change",function(){n.disabled(t.readonly||!P.hasHeaders(t))})}},D=function(t){return function(e){return e&&t.dom.is(e,"."+l.getTocClass(t))&&t.getBody().contains(e)}},M=function(t){t.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:B(t)}),t.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),t.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:B(t)}),t.addContextToolbar(D(t),"tocupdate")},x={register:M};e.add("toc",function(t){U.register(t),x.register(t),H.setup(t)})}()}()},loUf:function(t,e,n){n("UyWB")}});
//# sourceMappingURL=4.b9e0d04f853bd2c6f117.js.map
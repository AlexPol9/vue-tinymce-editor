webpackJsonp([39],{eRbm:function(t,e){!function(){!function(t){"use strict";function e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}function n(){}var r=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return r(n())}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(t){return t.fire("RestoreDraft")},c=function(t){return t.fire("StoreDraft")},s=function(t){return t.fire("RemoveDraft")},f=function(t,e){var n={s:1e3,m:6e4},r=t||e,o=/^(\d+)([ms]?)$/.exec(""+r);return(o[2]?n[o[2]]:1)*parseInt(r,10)},l=function(t){return t.getParam("autosave_ask_before_unload",!0)},m=function(e){var n=e.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return n=n.replace(/\{path\}/g,t.document.location.pathname),n=n.replace(/\{query\}/g,t.document.location.search),n=n.replace(/\{hash\}/g,t.document.location.hash),n=n.replace(/\{id\}/g,e.id)},d=function(t){return t.getParam("autosave_restore_when_empty",!1)},v=function(t){return f(t.settings.autosave_interval,"30s")},g=function(t){return f(t.settings.autosave_retention,"20m")},y=function(t,e){var n=t.settings.forced_root_block;return""===(e=i.trim(void 0===e?t.getBody().innerHTML:e))||new RegExp("^<"+n+"[^>]*>((Â |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+n+">|<br>$","i").test(e)},p=function(t){var e=parseInt(a.getItem(m(t)+"time"),10)||0;return!((new Date).getTime()-e>g(t))||(h(t,!1),!1)},h=function(t,e){var n=m(t);a.removeItem(n+"draft"),a.removeItem(n+"time"),!1!==e&&s(t)},D=function(t){var e=m(t);!y(t)&&t.isDirty()&&(a.setItem(e+"draft",t.getContent({format:"raw",no_events:!0})),a.setItem(e+"time",(new Date).getTime().toString()),c(t))},_=function(t){var e=m(t);p(t)&&(t.setContent(a.getItem(e+"draft"),{format:"raw"}),u(t))},b=function(t,e){var n=v(t);e.get()||(setInterval(function(){t.removed||D(t)},n),e.set(!0))},w=function(t){t.undoManager.transact(function(){_(t),h(t)}),t.focus()},R=function(t){return{hasDraft:e(p,t),storeDraft:e(D,t),restoreDraft:e(_,t),removeDraft:e(h,t),isEmpty:e(y,t)}},I=tinymce.util.Tools.resolve("tinymce.EditorManager");I._beforeUnloadHandler=function(){var t;return i.each(I.get(),function(e){e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&l(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))}),t};var T=function(e){t.window.onbeforeunload=I._beforeUnloadHandler},P=function(t,e){return function(n){var r=n.control;r.disabled(!p(t)),t.on("StoreDraft RestoreDraft RemoveDraft",function(){r.disabled(!p(t))}),b(t,e)}},k=function(t,e){t.addButton("restoredraft",{title:"Restore last draft",onclick:function(){w(t)},onPostRender:P(t,e)}),t.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){w(t)},onPostRender:P(t,e),context:"file"})};o.add("autosave",function(t){var e=r(!1);return T(),k(t,e),t.on("init",function(){d(t)&&t.dom.isEmpty(t.getBody())&&_(t)}),R(t)})}(window)}()},mV4C:function(t,e,n){n("eRbm")}});
//# sourceMappingURL=39.994dd37a30133d81e73f.js.map